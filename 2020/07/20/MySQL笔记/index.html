<!DOCTYPE html>
<html>
<head hexo-theme='https://volantis.js.org/#3.0-beta1'>
  <meta charset="utf-8">
  <!-- SEO相关 -->
  
    
  
  <!-- 渲染优化 -->
  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <!-- 页面元数据 -->
  
  <title>MySQL基础知识点 - 特特的天</title>
  
    <meta name="keywords" content="数据库">
  

  
    <meta name="description" content="这里，有MySQL的一些基础知识点^_^">
  

  <!-- feed -->
  

  <!-- import meta -->
  

  <!-- link -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13/css/all.min.css">
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">


  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.css">

  

  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.css">
  

  

  <!-- import link -->
  

  
  
    
<link rel="stylesheet" href="/css/style.css">

  

  
  
</head>

<body>
  
  
  
  <div class="cover-wrapper">
    <cover class='cover post' style="display: none;">
      <div class='cover-body'>
  <div class='a'>
    
      <img class='logo' src='https://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/welcome_here.png'/>
    
    
      <p class="title">特特的天</p>
    
    
      <p class="subtitle">While there is life there is hope</p>
    
  </div>
  <div class='b'>
    
      <div class="m_search">
        <form name="searchform" class="form u-search-form">
          <input type="text" class="input u-search-input" placeholder="" />
          <i class="icon fas fa-search fa-fw"></i>
        </form>
      </div>
    
    <div class='menu navigation'>
      <ul class='cover-list-h'>
        
          
            <li>
              <a class="nav home"
                href="https://tetedetian2.github.io//"
                
                
                id="https:tetedetian2githubio">
                <i class='fas fa-rss fa-fw'></i>主页
              </a>
            </li>
          
        
      </ul>
    </div>
  </div>
</div>

      <div class="scroll-down" style="display: none;"><i class="fa fa-chevron-down scroll-down-effects"></i></div>
    </cover>
    <header class="l_header shadow blur">
  <div class='container'>
  <div class='wrapper'>
    <div class='nav-sub'>
      <p class="title"></p>
      <ul class='switcher nav-list-h' id="pjax-header-nav-list">
        <li><a class="s-comment fas fa-comments fa-fw" target="_self" href='javascript:void(0)'></a></li>
        
          <li><a class="s-toc fas fa-list fa-fw" target="_self" href='javascript:void(0)'></a></li>
        
      </ul>
    </div>
		<div class="nav-main">
      
        
        <a class="title flat-box" target="_self" href='/'>
          
          
          
            特特的天
          
        </a>
      

			<div class='menu navigation'>
				<ul class='nav-list-h'>
          
          
          
            
            
              <li>
                <a class="flat-box" href=/
                  
                  
                  
                    id="home"
                  >
                  <i class='fas fa-rss fa-fw'></i>博客
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href=/categories/
                  
                  
                  
                    id="categories"
                  >
                  <i class='fas fa-folder-open fa-fw'></i>分类
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href=/tags/
                  
                  
                  
                    id="tags"
                  >
                  <i class='fas fa-tags fa-fw'></i>标签
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href=/archives/
                  
                  
                  
                    id="archives"
                  >
                  <i class='fas fa-archive fa-fw'></i>归档
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href=/friends/
                  
                  
                  
                    id="friends"
                  >
                  <i class='fas fa-link fa-fw'></i>友链
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href=/about/
                  
                  
                  
                    id="about"
                  >
                  <i class='fas fa-info-circle fa-fw'></i>关于
                </a>
                
              </li>
            
          
          
				</ul>
			</div>

      <div class="m_search">
        <form name="searchform" class="form u-search-form">
          <i class="icon fas fa-search fa-fw"></i>
          <input type="text" class="input u-search-input" placeholder="Search..." />
        </form>
      </div>

			<ul class='switcher nav-list-h'>
				
					<li><a class="s-search fas fa-search fa-fw" target="_self" href='javascript:void(0)'></a></li>
				
				<li>
          <a class="s-menu fas fa-bars fa-fw" target="_self" href='javascript:void(0)'></a>
          <ul class="menu-phone list-v navigation white-box">
            
              
            
              <li>
                <a class="flat-box" href=/
                  
                  
                  
                    id="home"
                  >
                  <i class='fas fa-rss fa-fw'></i>博客
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href=/categories/
                  
                  
                  
                    id="categories"
                  >
                  <i class='fas fa-folder-open fa-fw'></i>分类
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href=/tags/
                  
                  
                  
                    id="tags"
                  >
                  <i class='fas fa-tags fa-fw'></i>标签
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href=/archives/
                  
                  
                  
                    id="archives"
                  >
                  <i class='fas fa-archive fa-fw'></i>归档
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href=/friends/
                  
                  
                  
                    id="friends"
                  >
                  <i class='fas fa-link fa-fw'></i>友链
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href=/about/
                  
                  
                  
                    id="about"
                  >
                  <i class='fas fa-info-circle fa-fw'></i>关于
                </a>
                
              </li>
            
          
            
          </ul>
        </li>
			</ul>
		</div>
	</div>
  </div>
</header>

  </div>
  

  <div class="l_body">
    <div class='body-wrapper' id="pjax-container">
      
        <!--此文件用来存放一些不方便取值的变量-->
<!--思路大概是将值藏到重加载的区域内-->



<div id="pjax-data" style="display: none">
  <div id="pjax-ispage">true</div>
  <div id="pjax-pageTitle">MySQL基础知识点</div>
  <div id="pjax-enable-cover">true</div>
  
  <div id="valine-path">none</div>
  <div id="valine-placeholder">none</div>
  
  
</div>


<script>
  // 处理封面 此时 jquery 还没加载
  if ("blog" == "none") { // 移除封面
    document.getElementsByClassName('cover')[0].style.display = "none";
    document.getElementsByClassName('l_body')[0].classList.add("nocover");
    document.getElementsByClassName('l_header', 'cover-wrapper')[0].classList.add("show");
  } else {
    if ("blog" == "blog") { // 半屏
      document.getElementsByClassName('cover')[0].classList.remove("full");
      document.getElementsByClassName('cover')[0].classList.add("half");
      document.getElementsByClassName('scroll-down')[0].style.display = "none";
    } else if ("blog" == "docs") { // 全屏
      document.getElementsByClassName('cover')[0].classList.remove("half");
      document.getElementsByClassName('cover')[0].classList.add("full");
      document.getElementsByClassName('scroll-down')[0].style.display = "";
    }
    document.getElementsByClassName('cover')[0].style.display = "";
    document.getElementsByClassName('l_body', 'show')[0].classList.remove("nocover");
    document.getElementsByClassName('l_header', 'cover-wrapper')[0].classList.remove("show");
  }
</script>

      
      

<div class='l_main'>
  

  
    <article id="post" class="post white-box reveal shadow article-type-post" itemscope itemprop="blogPost">
      


  <section class='meta'>
    
      
      
      <div class="meta" id="header-meta">
        
          
  <h1 class="title">
    <a href="/2020/07/20/MySQL%E7%AC%94%E8%AE%B0/">
      MySQL基础知识点
    </a>
  </h1>


        
        <div class='new-meta-box'>
          
            
          
            
              
<div class='new-meta-item author'>
  <a href="https://xaoxuu.com" target="_blank" rel="nofollow noopener">
    <img no-lazy src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png">
    <p>特特的天</p>
  </a>
</div>

            
          
            
              

            
          
            
              <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-calendar-alt fa-fw" aria-hidden="true"></i>
    <p>发布于：Jul 20, 2020</p>
  </a>
</div>

            
          
            
              

            
          
        </div>
        
          <hr>
        
      </div>
    
  </section>


      <section class="article typo">
        <div class="article-entry" itemprop="articleBody">
          
          
          <p>这里，有MySQL的一些基础知识点^_^</p>
<a id="more"></a>

<div align="center">——————目录在右下角噢——————</div>

<div align="center"> <img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200719154916920.png" alt="image-20200719154916920" style="zoom:80%;" /></div>





<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><em>注：此博客内容基于《MySQL必知必会》一书，下载链接：<a href="https://pan.baidu.com/s/1phUYbp982A-aGwWTiGosKw" target="_blank" rel="noopener">https://pan.baidu.com/s/1phUYbp982A-aGwWTiGosKw</a> 提取码:4d7l</em></p>
<p>个人喜欢在学习一样新东西之前先了解它是什么、它有什么用、为什么要学它、大约怎么学。不然学起来云里雾里，心肌梗塞的感觉。<br>那么现在先回答一下上面的问题：</p>
<blockquote>
<p><strong>1.它是什么：</strong>MySQL其实是一个数据库管理系统，可以理解为一种数据库软件。 </p>
</blockquote>
<blockquote>
<p><strong>2.它有什么用：</strong>平时我们接触的很多东西都与数据库有关，比如你在学校的学籍信息系统通过你的学号查询你的信息，就是通过访问学校创建的数据库来查询的。而MySQL就相当于访问的工具。  </p>
</blockquote>
<blockquote>
<p><strong>3.为什么要学它：</strong>因为前面说的，我们日常生活中有许许多多的数据，我们要学会怎么去查看，获取等。  </p>
</blockquote>
<blockquote>
<p><strong>4.大约怎么学：</strong></p>
<blockquote>
<p>1.安装MySQL，微信搜索“<strong>软件安装管家</strong>”，软件目录里有多个MySQL版本的下载地址以及安装教程，最后那个Navicat Premium是一个将数据库可视化的软件。</p>
<p>2.建立《MySQL必知必会》用到的数据库，后面学习需要用，就像学习excel一样，需要有一个表格来处理。《MySQL必知必会》后面的附录B有介绍。也可参考博客：<a href="https://blog.csdn.net/x__Sherlock/article/details/104223646" target="_blank" rel="noopener">https://blog.csdn.net/x__Sherlock/article/details/104223646</a></p>
<p>3.学习MySQL知识以及处理命令</p>
</blockquote>
</blockquote>
<h1 id="第一章——了解SQL"><a href="#第一章——了解SQL" class="headerlink" title="第一章——了解SQL"></a>第一章——了解SQL</h1><h2 id="SQL"><a href="#SQL" class="headerlink" title="SQL:"></a>SQL:</h2><blockquote>
<p>结构化查询语言（Structured Query Language），是一种专门用来与数据库通信的语言</p>
</blockquote>
<h2 id="数据库："><a href="#数据库：" class="headerlink" title="数据库："></a>数据库：</h2><blockquote>
<p>保存有组织的数据的容器</p>
</blockquote>
<h2 id="数据库组成"><a href="#数据库组成" class="headerlink" title="数据库组成"></a>数据库组成</h2><blockquote>
<ol>
<li><p><strong>表：</strong>某种特定类型数据的结构化清单</p>
<blockquote>
<p><strong>表名:</strong> 数据库中的每个表都有一个名字，用来标识自己  </p>
<p><strong>列和数据类型：</strong>列中存储表的部分信息，比如顾客地址，号码  </p>
<p><strong>行:</strong>例如，顾客表可以每行存储一个顾客。表中的行数为记录的总数  </p>
<p><strong>主键：</strong>占据一列，用于标识行  </p>
</blockquote>
</li>
</ol>
</blockquote>
<h1 id="第二章——MySQL简介"><a href="#第二章——MySQL简介" class="headerlink" title="第二章——MySQL简介"></a>第二章——MySQL简介</h1><h2 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h2><blockquote>
<p>含义：是一种DBMS（数据库管理系统），即它是一种数据库软件</p>
<p>数据的所有存储、检索、管理和处理实际上是由数据库软件——DBMS（数据库管理系统）完成的</p>
</blockquote>
<h1 id="第三章——使用MySQL"><a href="#第三章——使用MySQL" class="headerlink" title="第三章——使用MySQL"></a>第三章——使用MySQL</h1><p><em>注意：1.MySQL命令用;或\g结束，换句话说，仅按Enter不执行命令 2.输入quit或exit退出命令行实用程序。</em></p>
<h2 id="1-基本命令"><a href="#1-基本命令" class="headerlink" title="1.基本命令"></a>1.基本命令</h2><h3 id="1-1创建新数据库"><a href="#1-1创建新数据库" class="headerlink" title="1.1创建新数据库"></a>1.1创建新数据库</h3><blockquote>
<p>如下，创建一个名为“test”的数据库<br><code>create database test;</code></p>
</blockquote>
<h3 id="1-2查看数据库"><a href="#1-2查看数据库" class="headerlink" title="1.2查看数据库"></a>1.2查看数据库</h3><blockquote>
<p><code>show databases;</code></p>
</blockquote>
<h3 id="1-3使用某个数据库"><a href="#1-3使用某个数据库" class="headerlink" title="1.3使用某个数据库"></a>1.3使用某个数据库</h3><blockquote>
<p><strong>格式</strong>：“use 数据库名字;”，比如下面是使用数据库“test”<br><code>use test;</code></p>
</blockquote>
<h3 id="1-4查看数据库的表"><a href="#1-4查看数据库的表" class="headerlink" title="1.4查看数据库的表"></a>1.4查看数据库的表</h3><blockquote>
<p><code>show tables;</code><br>查看数据库的表之前需要先“use”数据库，指明需要显示的数据库，如下<br><img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/1.PNG" alt="1"></p>
</blockquote>
<h3 id="1-5查看表的列信息"><a href="#1-5查看表的列信息" class="headerlink" title="1.5查看表的列信息"></a>1.5查看表的列信息</h3><blockquote>
<p><code>show columns from customers;</code>或<code>describe customers;</code><br>返回的是每一列的信息，即字段名、数据类型、是否允许NULL、键信息、默认值以及其他信息<br>显示结果如下</p>
<p><img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/3.PNG" alt="3"></p>
<p>下图为customers表，自己比较一下</p>
<p><img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/2.PNG" alt="2">  </p>
</blockquote>
<h1 id="第四章——检索数据"><a href="#第四章——检索数据" class="headerlink" title="第四章——检索数据"></a>第四章——检索数据</h1><h2 id="1-简单检索"><a href="#1-简单检索" class="headerlink" title="1.简单检索"></a>1.简单检索</h2><h3 id="1-1检索单列"><a href="#1-1检索单列" class="headerlink" title="1.1检索单列"></a>1.1检索单列</h3><blockquote>
<p><strong>例子</strong>：<code>select prod_name from products;</code><br><strong>解释</strong>：上述语句利用SELECT语句从 products表中检索一个名为prod_name的列。</p>
</blockquote>
<h3 id="1-2检索多个列"><a href="#1-2检索多个列" class="headerlink" title="1.2检索多个列"></a>1.2检索多个列</h3><blockquote>
<p><strong>例子</strong>：<code>select prod_id,prod_name,prod_price from products;</code><br><strong>解释</strong>：上述语句利用SELECT语句从products表中检索名为 prod_id,prod_name,prod_price 的三个列。</p>
</blockquote>
<h3 id="1-3检索所有列"><a href="#1-3检索所有列" class="headerlink" title="1.3检索所有列"></a>1.3检索所有列</h3><blockquote>
<p><strong>例子</strong>：<code>select * from products;</code><br><strong>解释</strong>：上述语句利用SELECT语句从products表中检索所有列。</p>
</blockquote>
<h3 id="1-4检索不同行"><a href="#1-4检索不同行" class="headerlink" title="1.4检索不同行"></a>1.4检索不同行</h3><blockquote>
<p><strong>例子</strong>：<code>select distinct vend_id from products;</code></p>
<p><strong>解释</strong>：上述语句利用SELECT语句从products表中检索vend_id列不同的行。输出看下图</p>
<p><img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200706133534777.png" alt="image-20200706133534777"></p>
<p>对比下图<code>select vend_id from products;</code>的输出结果</p>
<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200706133958660.png" width="100px">
</blockquote>
<h2 id="2-限制结果检索"><a href="#2-限制结果检索" class="headerlink" title="2.限制结果检索"></a>2.限制结果检索</h2><h3 id="2-1限制行数"><a href="#2-1限制行数" class="headerlink" title="2.1限制行数"></a>2.1限制行数</h3><blockquote>
<p><strong>例子</strong>：<code>select vend_id from products limit 5;</code></p>
<p><strong>解释</strong>：上述语句利用SELECT语句从products表中检索vend_id前五行。输出看下图</p>
<p><img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200706140153243.png" alt="image-20200706140153243"></p>
<p><strong>例子</strong>：<code>select vend_id from products limit 5,5;</code></p>
<p><strong>解释</strong>：上述语句利用SELECT语句从products表中检索vend_id 的6~10行（因为第一行为行0，不是行1，类似c语言的数组元素定义）。输出看下图</p>
<p><img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200706140433491.png" alt="image-20200706140433491"></p>
</blockquote>
<h3 id="2-2使用完全限定的表名"><a href="#2-2使用完全限定的表名" class="headerlink" title="2.2使用完全限定的表名"></a>2.2使用完全限定的表名</h3><blockquote>
<p><strong>例子</strong>：1.<code>select products.prod_name from products;</code></p>
<p>​            2.<code>select products.prod_name from test.products;</code>  (test是我存放这些表的)</p>
<p><strong>解释</strong>：1和2与<code>select prod_name from products;</code>功能一样至于有什么特殊用处，我还不知道。。。</p>
<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200706141931838.png" width="100px">
</blockquote>
<h1 id="第五章——排序检索数据"><a href="#第五章——排序检索数据" class="headerlink" title="第五章——排序检索数据"></a>第五章——排序检索数据</h1><h2 id="1-根据一个列排序"><a href="#1-根据一个列排序" class="headerlink" title="1.根据一个列排序"></a>1.根据一个列排序</h2><blockquote>
<p><strong>例子</strong>：<code>select prod_name from products order by prod_name;</code></p>
<p><strong>解释</strong>：上述语句将products表中prod_name列排序输出。（按照字母排序）</p>
</blockquote>
<h2 id="2-根据多个列排序"><a href="#2-根据多个列排序" class="headerlink" title="2.根据多个列排序"></a>2.根据多个列排序</h2><blockquote>
<p><strong>例子</strong>：<code>select prod_id,prod_price,prod_name from products order by prod_price,prod_name;</code></p>
<p><strong>解释</strong>：上述语句将products表中prod_id,prod_price,prod_name三列根据prod_price,prod_name排序输出。（先按照prod_price排序，prod_price相同的，按照prod_name排），输出如下图</p>
<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200706161619491.png" width="300px">
</blockquote>
<h2 id="3-指定排序方向"><a href="#3-指定排序方向" class="headerlink" title="3.指定排序方向"></a>3.指定排序方向</h2><blockquote>
<p>排序方向指升序还是降序，默认升序，需要降序的话需要用到desc关键字</p>
<p><strong>例子</strong>：<code>select prod_id,prod_price,prod_name from products order by prod_price desc,prod_name;</code></p>
<p><strong>解释</strong>：上述语句将products表中prod_id,prod_price,prod_name三列根据prod_price降序,prod_name升序，排序输出。</p>
</blockquote>
<h2 id="4-排序并限制输出数量"><a href="#4-排序并限制输出数量" class="headerlink" title="4.排序并限制输出数量"></a>4.排序并限制输出数量</h2><blockquote>
<p><strong>例子</strong>：<code>select prod_price from products order by prod_price desc limit 1;</code></p>
<p><strong>解释</strong>：上述语句将products表中prod_price列根据prod_price降序排序输出，并指输出一个。比如生活中需要找到最贵的选项。</p>
</blockquote>
<h1 id="第六章——过滤数据"><a href="#第六章——过滤数据" class="headerlink" title="第六章——过滤数据"></a>第六章——过滤数据</h1><p><em>本章将讲授如何使用 SELECT 语句的  WHERE 子句指定搜索条件</em></p>
<h2 id="1-相等检查"><a href="#1-相等检查" class="headerlink" title="1.相等检查"></a>1.相等检查</h2><blockquote>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> prod_name,prod_price <span class="keyword">from</span> products <span class="keyword">where</span> prod_price=<span class="number">2.50</span>;</span><br></pre></td></tr></table></figure>

<p><strong>解释</strong>：显示prod_name,prod_price两列，但只显示prod_price=2.50的行。输出看下图</p>
<p><img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200707131149667.png" alt="image-20200707131149667"></p>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> prod_name,prod_price <span class="keyword">from</span> products <span class="keyword">where</span> prod_name=<span class="string">'fuses'</span>;</span><br></pre></td></tr></table></figure>

<p><strong>解释</strong>：显示prod_name,prod_price两列，但只显示prod_name=’fuses’的行(因为是字符串，需要用单引号)。</p>
</blockquote>
<h2 id="2-范围值检查"><a href="#2-范围值检查" class="headerlink" title="2.范围值检查"></a>2.范围值检查</h2><blockquote>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> prod_name,prod_price <span class="keyword">from</span> products <span class="keyword">where</span> prod_price <span class="keyword">between</span> <span class="number">5</span> <span class="keyword">and</span> <span class="number">10</span>;</span><br></pre></td></tr></table></figure>

<p><strong>解释</strong>：显示prod_name,prod_price两列，但只显示5&lt;=prod_price&lt;=10的行。</p>
</blockquote>
<h2 id="3-空值检查"><a href="#3-空值检查" class="headerlink" title="3.空值检查"></a>3.空值检查</h2><blockquote>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> prod_name,prod_price <span class="keyword">from</span> products <span class="keyword">where</span> prod_price <span class="keyword">is</span> <span class="literal">null</span>;</span><br></pre></td></tr></table></figure>

<p><strong>解释</strong>：显示prod_name,prod_price两列，但只显示prod_price为空的行（注意：0不是空）。</p>
</blockquote>
<h2 id="4-其他的where子句操作符"><a href="#4-其他的where子句操作符" class="headerlink" title="4.其他的where子句操作符"></a>4.其他的where子句操作符</h2><blockquote>
<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200707132256772.png" alt="image-20200707132256772" style="zoom: 67%;" />
</blockquote>
<h2 id="5-一些注意点："><a href="#5-一些注意点：" class="headerlink" title="5.一些注意点："></a>5.一些注意点：</h2><blockquote>
<p>1.NULL值的行在匹配或不匹配具体数值是，不会返回。</p>
<p>2.where 与order by 一起用时，where需要放在order by 前面。例如</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> prod_name,prod_price <span class="keyword">from</span> products <span class="keyword">where</span> prod_price=<span class="number">2.50</span> <span class="keyword">order</span> <span class="keyword">by</span> prod_name <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure>

<p>输出如下</p>
<p><img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200707134058952.png" alt="image-20200707134058952"></p>
</blockquote>
<h1 id="第七章——数据过滤"><a href="#第七章——数据过滤" class="headerlink" title="第七章——数据过滤"></a>第七章——数据过滤</h1><p>(这名字咋和第六章这么像呢)</p>
<p><em>本章讲授如何组合WHERE子句以建立功能更强的更高级的搜索条件。我们还将学习如何使用NOT和IN操作符。</em></p>
<h2 id="1-and操作符"><a href="#1-and操作符" class="headerlink" title="1.and操作符"></a>1.and操作符</h2><blockquote>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> prod_name,prod_price <span class="keyword">from</span> products <span class="keyword">where</span> vend_id=<span class="number">1003</span> <span class="keyword">and</span> prod_price&lt;=<span class="number">10</span>;</span><br></pre></td></tr></table></figure>

<p><strong>解释</strong>：显示prod_name,prod_price两列，但只显示同时满足vend_id=1003 和 prod_price&lt;=10的行。</p>
</blockquote>
<h2 id="2-or操作符"><a href="#2-or操作符" class="headerlink" title="2.or操作符"></a>2.or操作符</h2><blockquote>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> prod_name,prod_price <span class="keyword">from</span> products <span class="keyword">where</span> vend_id=<span class="number">1003</span> <span class="keyword">or</span> vend_id=<span class="number">1002</span>;</span><br></pre></td></tr></table></figure>

<p><strong>解释</strong>：显示prod_name,prod_price两列，但只显示满足vend_id=1003 或 vend_id=1002的行。</p>
</blockquote>
<h2 id="3-and与or优先级"><a href="#3-and与or优先级" class="headerlink" title="3.and与or优先级"></a>3.and与or优先级</h2><blockquote>
<p>and的优先级大于or，与加减乘除优先级类似，and相当于乘除，or加减</p>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> prod_name,prod_price <span class="keyword">from</span> products <span class="keyword">where</span> vend_id=<span class="number">1002</span> <span class="keyword">or</span> vend_id=<span class="number">1003</span> <span class="keyword">and</span> prod_price&gt;=<span class="number">10</span>;</span><br></pre></td></tr></table></figure>

<p><strong>解释</strong>：输出显示prod_name,prod_price两列，但只显示满足vend_id=1003 and prod_price&gt;=10 或 vend_id=1002的行。</p>
<p>可以通过加括号控制计算顺序，比如</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> prod_name,prod_price <span class="keyword">from</span> products <span class="keyword">where</span> (vend_id=<span class="number">1002</span> <span class="keyword">or</span> vend_id=<span class="number">1003</span>) <span class="keyword">and</span> prod_price&gt;=<span class="number">10</span>;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="4-in操作符"><a href="#4-in操作符" class="headerlink" title="4.in操作符"></a>4.in操作符</h2><blockquote>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> prod_name,prod_price <span class="keyword">from</span> products <span class="keyword">where</span> vend_id <span class="keyword">in</span> (<span class="number">1003</span>,<span class="number">1002</span>);</span><br></pre></td></tr></table></figure>

<p><strong>解释</strong>：显示prod_name,prod_price两列，但只显示满足vend_id=1003 或 vend_id=1002的行。其实，他的功能和<code>select prod_name,prod_price from products where vend_id=1003 or vend_id=1002;</code>是一样的。</p>
<p><strong>相对于or的优点：</strong></p>
<blockquote>
<p>1.在使用长的合法选项清单时， in操作符的语法更清楚且更直观。<br>2.在使用in时，计算的次序更容易管理（因为使用的操作符更少）。<br>3.in操作符一般比OR操作符清单执行更快。<br>4.in的最大优点是可以包含其他SELECT语句，使得能够更动态地建立WHERE子句。  </p>
</blockquote>
</blockquote>
<h2 id="5-not操作符"><a href="#5-not操作符" class="headerlink" title="5.not操作符"></a>5.not操作符</h2><blockquote>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> prod_name,prod_price <span class="keyword">from</span> products <span class="keyword">where</span> vend_id <span class="keyword">not</span> <span class="keyword">in</span> (<span class="number">1003</span>,<span class="number">1002</span>);</span><br></pre></td></tr></table></figure>

<p><strong>解释</strong>：显示vend_id=1003 或 vend_id=1002 之外的行。</p>
</blockquote>
<h1 id="第八章——用通配符进行过滤"><a href="#第八章——用通配符进行过滤" class="headerlink" title="第八章——用通配符进行过滤"></a>第八章——用通配符进行过滤</h1><p><em>本章介绍什么是通配符、如何使用通配符以及怎样使用LIKE操作符进行通配搜索，以便对数据进行复杂过滤。</em></p>
<p><strong>通配符</strong>：用来匹配值的一部分的特殊字符  。</p>
<p><strong>搜索模式</strong>：由字面值、通配符或两者组合构成的搜索条件。  比如直接相等匹配和使用通配符匹配是两种搜索模式。</p>
<h2 id="1-like操作符（是一种谓词"><a href="#1-like操作符（是一种谓词" class="headerlink" title="1.like操作符（是一种谓词)"></a>1.like操作符（是一种谓词)</h2><blockquote>
<p>为在搜索子句中使用通配符，必须使用like操作符。like指示MySQL，后跟的搜索模式利用通配符匹配而不是直接相等匹配进行比较。 （就是用来告诉MySQL搜索模式的）</p>
<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200707151702531.png" alt="image-20200707151702531" style="zoom:80%;" /> 
</blockquote>
<h2 id="2-百分号（-）通配符"><a href="#2-百分号（-）通配符" class="headerlink" title="2.百分号（%）通配符"></a>2.百分号（%）通配符</h2><blockquote>
<p>在搜索串中， %表示任何字符出现任意次数。  </p>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> prod_id,prod_name <span class="keyword">from</span> products <span class="keyword">where</span> prod_name <span class="keyword">like</span> <span class="string">'jet%'</span>;</span><br></pre></td></tr></table></figure>

<p><strong>解释</strong>：显示prod_name中以jet开头的行。</p>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> prod_id,prod_name <span class="keyword">from</span> products <span class="keyword">where</span> prod_name <span class="keyword">like</span> <span class="string">'%anvil%'</span>;</span><br></pre></td></tr></table></figure>

<p><strong>解释</strong>：显示prod_name中包含jet的行。</p>
</blockquote>
<h2 id="3-下划线（-）通配符"><a href="#3-下划线（-）通配符" class="headerlink" title="3.下划线（_）通配符"></a>3.下划线（_）通配符</h2><blockquote>
<p>与下划线的用途与%一样，但下划线只匹配<strong>单个字符</strong>而不是多个字符 。</p>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> prod_id,prod_name <span class="keyword">from</span> products <span class="keyword">where</span> prod_name <span class="keyword">like</span> <span class="string">'_ ton anvil'</span>;</span><br></pre></td></tr></table></figure>

<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200708153049199.png" alt="image-20200708153049199" style="zoom:80%;" />

<p><strong>解释</strong>：”_“的地方只可以有一个字符。对比一下下面的例子</p>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> prod_id,prod_name <span class="keyword">from</span> products <span class="keyword">where</span> prod_name <span class="keyword">like</span> <span class="string">'% ton anvil'</span>;</span><br></pre></td></tr></table></figure>

<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200708153252854.png" alt="image-20200708153252854" style="zoom: 80%;" />
</blockquote>
<h1 id="第九章——用正则表达式进行搜索"><a href="#第九章——用正则表达式进行搜索" class="headerlink" title="第九章——用正则表达式进行搜索"></a>第九章——用正则表达式进行搜索</h1><p><em>本章将学习如何在MySQL WHERE子句内使用正则表达式来更好地控制数据过滤。用到  regexp 操作符</em></p>
<h2 id="1-基本字符匹配"><a href="#1-基本字符匹配" class="headerlink" title="1.基本字符匹配"></a>1.基本字符匹配</h2><blockquote>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> prod_name <span class="keyword">from</span> products <span class="keyword">where</span> prod_name regexp <span class="string">'1000'</span>;</span><br></pre></td></tr></table></figure>

<p><strong>解释</strong>：显示prod_name中包含1000的行。</p>
</blockquote>
<h2 id="2-进行或匹配"><a href="#2-进行或匹配" class="headerlink" title="2.进行或匹配"></a>2.进行或匹配</h2><blockquote>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> prod_name <span class="keyword">from</span> products <span class="keyword">where</span> prod_name regexp <span class="string">'1000|2000'</span>;</span><br></pre></td></tr></table></figure>

<p><strong>解释</strong>：显示prod_name中包含1000或2000的行。</p>
</blockquote>
<h2 id="3-匹配几个字符之一"><a href="#3-匹配几个字符之一" class="headerlink" title="3.匹配几个字符之一"></a>3.匹配几个字符之一</h2><blockquote>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> prod_name <span class="keyword">from</span> products <span class="keyword">where</span> prod_name regexp <span class="string">'[123] ton'</span>;</span><br></pre></td></tr></table></figure>

<p><img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200708160503106.png" alt="image-20200708160503106"></p>
<p><strong>解释</strong>：显示prod_name中包含”1 ton”、”2 ton”  或者”3 ton“的行。</p>
</blockquote>
<h2 id="4-匹配范围"><a href="#4-匹配范围" class="headerlink" title="4.匹配范围"></a>4.匹配范围</h2><blockquote>
<p>上面的<code>select prod_name from products where prod_name regexp &#39;[123] ton&#39;;</code>还可以换成</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> prod_name <span class="keyword">from</span> products <span class="keyword">where</span> prod_name regexp <span class="string">'[1-3] ton'</span>;</span><br></pre></td></tr></table></figure>

<p>还有字母也可以，比如[a-z]</p>
</blockquote>
<h2 id="5-匹配特殊字符"><a href="#5-匹配特殊字符" class="headerlink" title="5.匹配特殊字符"></a>5.匹配特殊字符</h2><blockquote>
<p>比如<code>.</code> ， <code>|</code>  ， <code>[]</code>  ，这些有特殊含义的字符，需要用<code>\\</code>来进行转义</p>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> prod_name <span class="keyword">from</span> products <span class="keyword">where</span> prod_name regexp <span class="string">'\\.'</span>;</span><br></pre></td></tr></table></figure>

<p><img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200708161841862.png" alt="image-20200708161841862"></p>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> prod_name <span class="keyword">from</span> products <span class="keyword">where</span> prod_name regexp <span class="string">'.'</span>;</span><br></pre></td></tr></table></figure>

<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200708161928028.png" alt="image-20200708161928028" style="zoom:80%;" />

<p><strong>解释</strong>：因为<code>.</code>在regexp操作中，代表任意字符，如果不在前面，MySQL就以为你想搜索任意字符</p>
</blockquote>
<h2 id="6-匹配字符类"><a href="#6-匹配字符类" class="headerlink" title="6.匹配字符类"></a>6.匹配字符类</h2><blockquote>
<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200708163653726.png" alt="image-20200708163653726" style="zoom:67%;" />

<p><strong>例子：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> prod_name <span class="keyword">from</span> products <span class="keyword">where</span> prod_name regexp <span class="string">'[:upper:]'</span>;</span><br></pre></td></tr></table></figure>

<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200708163958227.png" alt="image-20200708163958227" style="zoom:80%;" />

<p><strong>解释</strong>:显示prod_name中包含大写字母的行。</p>
</blockquote>
<h2 id="7-匹配多次出现"><a href="#7-匹配多次出现" class="headerlink" title="7.匹配多次出现"></a>7.匹配多次出现</h2><blockquote>
<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200708171249820.png" alt="image-20200708171249820" style="zoom:80%;" />

<p><strong>例子</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select prod_name from products where prod_name regexp &#39;\\([0-9] sticks?\\)&#39;;</span><br></pre></td></tr></table></figure>

<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200708171613118.png" alt="image-20200708171613118" style="zoom:80%;" />

<p><strong>解释</strong>：<code>\\(</code>  匹配  <code>(</code> ，<code>[0-9]</code>匹配任意数字（这个例子中为1和5），<code>sticks?</code>匹配<code>stick</code>和<code>sticks</code>（s后的?使s可选，因为?匹配它前面的任何字符的0次或1次出现），<code>\\)</code>匹配<code>)</code>。  </p>
<p><strong>例子</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select prod_name from products where prod_name regexp &#39;[[:digit:]]&#123;4&#125;&#39;;</span><br></pre></td></tr></table></figure>

<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200708172834824.png" alt="image-20200708172834824" style="zoom:80%;" />

<p><strong>解释</strong>：<code>[[:digit:]]{4}</code>匹配连在一起的任意4位数字。</p>
</blockquote>
<h2 id="8-定位符"><a href="#8-定位符" class="headerlink" title="8.定位符"></a>8.定位符</h2><blockquote>
<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200708173605982.png" alt="image-20200708173605982" style="zoom:80%;" />

<p>*注意：^的双重用途 ^有两种用法。在集合中（用[和]定义），用它来否定该集合，否则，用来指串的开始处。  *</p>
<p><strong>例子</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select prod_name from products where prod_name regexp &#39;^[0-9\\.]&#39;;</span><br></pre></td></tr></table></figure>

<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200708174236468.png" alt="image-20200708174236468" style="zoom:80%;" />

<p><strong>解释</strong>：<code>^[0-9\\.]</code>匹配0到9，或者<code>.</code>为开头的prod_name,<code>^[0-9\\.]</code>也可写成<code>^[123456789\\.]</code></p>
<p><strong>例子</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select prod_name from products where prod_name regexp &#39;[[:&lt;:]]t&#39;;</span><br></pre></td></tr></table></figure>

<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200708174614522.png" alt="image-20200708174614522" style="zoom:80%;" />

<p><strong>解释</strong>：<code>[[:&lt;:]]t</code>匹配t开头的词。</p>
</blockquote>
<h1 id="第十章——创建计算字段"><a href="#第十章——创建计算字段" class="headerlink" title="第十章——创建计算字段"></a>第十章——创建计算字段</h1><p>*本章介绍什么是计算字段，如何创建计算字段以及怎样从应用程序中使用别名引用它们。  *</p>
<h2 id="1-拼接字段"><a href="#1-拼接字段" class="headerlink" title="1.拼接字段"></a>1.拼接字段</h2><blockquote>
<p>使用<strong>concat</strong>函数</p>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">concat</span> (vend_name,<span class="string">'('</span>,vend_country,<span class="string">')'</span>) <span class="keyword">from</span> vendors;</span><br></pre></td></tr></table></figure>

<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200708182831071.png" alt="image-20200708182831071" style="zoom:80%;" />

<p><strong>解释</strong>：Concat()需要一个或多个指定的串，各个串之间用逗号分隔。上面的语句连接了4个元素。</p>
</blockquote>
<h2 id="2-使用别名"><a href="#2-使用别名" class="headerlink" title="2.使用别名"></a>2.使用别名</h2><blockquote>
<p>使用<strong>as</strong>关键字</p>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">concat</span> (vend_name,<span class="string">'('</span>,vend_country,<span class="string">')'</span>) <span class="keyword">as</span> vend_title <span class="keyword">from</span> vendors;</span><br></pre></td></tr></table></figure>

<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200708183646269.png" alt="image-20200708183646269" style="zoom:80%;" />

<p><strong>解释</strong>：这不用解释了吧？</p>
</blockquote>
<h2 id="3-执行算数计算"><a href="#3-执行算数计算" class="headerlink" title="3.执行算数计算"></a>3.执行算数计算</h2><blockquote>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> prod_id,quantity,item_price,quantity*item_price <span class="keyword">as</span> expanded_price <span class="keyword">from</span> orderitems <span class="keyword">where</span> order_num=<span class="number">20005</span>;</span><br></pre></td></tr></table></figure>

<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200708190316956.png" alt="image-20200708190316956" style="zoom:80%;" />

<p><strong>解释</strong>：这也不用解释了吧？加减乘除就是<code>##-*/</code>，也可以加括号。</p>
</blockquote>
<h1 id="第十一章——使用数据处理函数"><a href="#第十一章——使用数据处理函数" class="headerlink" title="第十一章——使用数据处理函数"></a>第十一章——使用数据处理函数</h1><p><em>本章介绍什么是函数， MySQL支持何种函数，以及如何使用这些函数。</em></p>
<h2 id="1-文本处理函数"><a href="#1-文本处理函数" class="headerlink" title="1.文本处理函数"></a>1.文本处理函数</h2><blockquote>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> vend_name,<span class="keyword">upper</span>(vend_name) <span class="keyword">as</span> vend_name_upcase <span class="keyword">from</span> vendors;</span><br></pre></td></tr></table></figure>

<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200709214317541.png" alt="image-20200709214317541" style="zoom: 80%;" />

<p><strong>解释</strong>：upper()函数将文本装换为大写。</p>
<p>下面列举了一些常用函数</p>
<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200709214548544.png" alt="image-20200709214548544" style="zoom:67%;" />

<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200709214615810.png" alt="image-20200709214615810" style="zoom:67%;" />

<p>上面列举的函数中，有个特别有趣的函数：soundex（）函数。</p>
<p>soundex是一个将任何文本串转换为描述其语音表示的字母数字模式的算法。 作用是根据发音来查找数据。</p>
<p> <strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> cust_name,cust_contact <span class="keyword">from</span> customers <span class="keyword">where</span> <span class="keyword">soundex</span>(cust_contact)=<span class="keyword">soundex</span>(<span class="string">'Y Lie'</span>);</span><br></pre></td></tr></table></figure>

<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200709220135560.png" alt="image-20200709220135560" style="zoom:80%;" />

<p>因为Y.Lee和Y.Lie发音相似，所以它们的SOUNDEX值匹配 。这个的作用是能够对录入数据时的错误进行补救。</p>
</blockquote>
<h2 id="2-日期和时间处理函数"><a href="#2-日期和时间处理函数" class="headerlink" title="2.日期和时间处理函数"></a>2.日期和时间处理函数</h2><blockquote>
<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200709221414550.png" alt="image-20200709221414550" style="zoom:67%;" />

<p>上图列出了一些常用的日期和时间处理函数，使用这些函数，有一些注意点，如下：<br>1.日期必须为格式yyyy-mm-dd  ，因为它排除了多义性（如，04/05/06是2006年5月4日或2006年4月5日或2004年5月6日或……）。</p>
<p>2.对于日期比较，习惯使用date()函数。  例如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> cust_id,order_num <span class="keyword">from</span> orders <span class="keyword">where</span> <span class="built_in">date</span>(order_date)=<span class="string">'2005-09-01'</span>;</span><br></pre></td></tr></table></figure>

<p>比</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> cust_id,order_num <span class="keyword">from</span> orders <span class="keyword">where</span> order_date=<span class="string">'2005-09-01'</span>;</span><br></pre></td></tr></table></figure>

<p>要好。因为order_date的数据类型为datetime。这种类型存储日期及时间值。  比 如 ， 存 储 的 order_date 值 为<br>2005-09-01 11:30:05，则WHERE order_date = ‘2005-09-01’失败。即使给出具有该日期的一行，也不会把它检索出来，因为WHERE匹配失败。  </p>
<p>同理，也应该在适当的时候使用time（）函数（筛选时间的）。</p>
</blockquote>
<h2 id="3-数值处理函数"><a href="#3-数值处理函数" class="headerlink" title="3.数值处理函数"></a>3.数值处理函数</h2><blockquote>
<p>数值处理函数，就是我们平时学习其他语言都会有的一类函数。</p>
<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200709225533282.png" alt="image-20200709225533282" style="zoom:67%;" />
</blockquote>
<h1 id="第十二章——汇总数据"><a href="#第十二章——汇总数据" class="headerlink" title="第十二章——汇总数据"></a>第十二章——汇总数据</h1><p>*本章介绍什么是SQL的聚集函数以及如何利用它们汇总表的数据  *</p>
<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200709231425249.png" alt="image-20200709231425249" style="zoom:80%;" />

<p>上图是一些基本的汇总数据的函数</p>
<p><strong>用法例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">avg</span>(prod_price) <span class="keyword">from</span> products;</span><br></pre></td></tr></table></figure>

<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200710142324387.png" alt="image-20200710142324387" style="zoom:80%;" />

<p>其他函数用法类似，不过需要注意count（）函数用法。</p>
<h2 id="count-函数"><a href="#count-函数" class="headerlink" title="count()函数"></a>count()函数</h2><blockquote>
<p>1.使用COUNT(*)对表中行的数目进行计数， 不管表列中包含的是空值（NULL）还是非空值。<br>2.使用COUNT(column)对特定列中具有值的行进行计数，忽略NULL值。  </p>
<p> <strong>例子(1)</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> customers;</span><br></pre></td></tr></table></figure>

<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200710143135044.png" alt="image-20200710143135044" style="zoom: 80%;" />

<p> <strong>例子(2)</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(cust_email) <span class="keyword">from</span> customers;</span><br></pre></td></tr></table></figure>

<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200710143157026.png" alt="image-20200710143157026" style="zoom:80%;" />

<p>因为cust_email只有三个数据，另外两个是空的，所以显示3</p>
</blockquote>
<h2 id="distinct参数"><a href="#distinct参数" class="headerlink" title="distinct参数"></a>distinct参数</h2><blockquote>
<p><strong>作用</strong>：只对不同的值进行处理</p>
<p> <strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">avg</span>(<span class="keyword">distinct</span> prod_price) <span class="keyword">from</span> products;</span><br></pre></td></tr></table></figure>

<p>只对prod_price中的不同值进行取平均值操作。</p>
</blockquote>
<h1 id="第十三章——分组数据"><a href="#第十三章——分组数据" class="headerlink" title="第十三章——分组数据"></a>第十三章——分组数据</h1><p><em>本章将介绍如何分组数据，以便能汇总表内容的子集。这涉及两个新SELECT语句子句，分别是GROUP BY子句和HAVING子句</em></p>
<h2 id="1-创建分组"><a href="#1-创建分组" class="headerlink" title="1.创建分组"></a>1.创建分组</h2><blockquote>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> vend_id,<span class="keyword">count</span>(*) <span class="keyword">as</span> num_prods <span class="keyword">from</span> products <span class="keyword">group</span> <span class="keyword">by</span> vend_id;</span><br></pre></td></tr></table></figure>

<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200710151928575.png" alt="image-20200710151928575" style="zoom: 80%;" />

<p><strong>解释</strong>：group by子句把vend_id按照数值进行了分组</p>
<p><strong>group by使用注意点</strong>：</p>
<blockquote>
<p>1.**group by子句必须出现在where子句之后，order by子句之前。  </p>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> vend_id,<span class="keyword">count</span>(*) <span class="keyword">as</span> num_prods <span class="keyword">from</span> products <span class="keyword">where</span> vend_id&lt;=<span class="number">1003</span> <span class="keyword">group</span> <span class="keyword">by</span> vend_id <span class="keyword">order</span> <span class="keyword">by</span> vend_id <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure>
</blockquote>
</blockquote>
<h2 id="2-过滤分组"><a href="#2-过滤分组" class="headerlink" title="2.过滤分组"></a>2.过滤分组</h2><blockquote>
<p>使用<strong>having</strong>子句</p>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> vend_id,<span class="keyword">count</span>(*) <span class="keyword">as</span> num_prods <span class="keyword">from</span> products <span class="keyword">group</span> <span class="keyword">by</span> vend_id <span class="keyword">having</span> <span class="keyword">count</span>(*)&gt;<span class="number">3</span>;</span><br></pre></td></tr></table></figure>

<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200710163213402.png" alt="image-20200710163213402" style="zoom: 80%;" />

<p><strong>解释</strong>：可以比较上面的例子，<code>having count(*)</code>把大于3的过滤出来，只显示大于3的</p>
</blockquote>
<h2 id="3-分组和排序"><a href="#3-分组和排序" class="headerlink" title="3.分组和排序"></a>3.分组和排序</h2><blockquote>
<p>group by和order by组合使用</p>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> order_num,<span class="keyword">sum</span>(quantity*item_price) <span class="keyword">as</span> ordertotal <span class="keyword">from</span> orderitems <span class="keyword">group</span> <span class="keyword">by</span> order_num <span class="keyword">having</span> <span class="keyword">sum</span>(quantity*item_price)&gt;=<span class="number">50</span> <span class="keyword">order</span> <span class="keyword">by</span> ordertotal;</span><br></pre></td></tr></table></figure>

<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200710220755519.png" alt="image-20200710220755519" style="zoom:80%;" />
</blockquote>
<h1 id="第十四章——使用子查询"><a href="#第十四章——使用子查询" class="headerlink" title="第十四章——使用子查询"></a>第十四章——使用子查询</h1><h2 id="1-利用子查询进行过滤"><a href="#1-利用子查询进行过滤" class="headerlink" title="1.利用子查询进行过滤"></a>1.利用子查询进行过滤</h2><blockquote>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> cust_name,cust_contact <span class="keyword">from</span> customers <span class="keyword">where</span> cust_id <span class="keyword">in</span> (<span class="keyword">select</span> cust_id <span class="keyword">from</span> orders <span class="keyword">where</span> order_num <span class="keyword">in</span> (<span class="keyword">select</span> order_num <span class="keyword">from</span> orderitems <span class="keyword">where</span> prod_id=<span class="string">'TNT2'</span>));</span><br></pre></td></tr></table></figure>

<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200710223330857.png" alt="image-20200710223330857" style="zoom:80%;" />

<p><strong>解释</strong>：<strong>(1)</strong> 检索包含物品TNT2的所有订单的编号。<strong>(2)</strong> 检索具有前一步骤列出的订单编号的所有客户的ID。<strong>(3)</strong> 检索前一步骤返回的所有客户ID的客户信息。  </p>
<p>这个例子，运用十五章学习的联结知识也可以解决，命令如下</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> cust_name,cust_contact <span class="keyword">from</span> customers,orderitems,orders <span class="keyword">where</span> customers.cust_id=orders.cust_id <span class="keyword">and</span> orderitems.order_num=orders.order_num <span class="keyword">and</span> prod_id=<span class="string">'TNT2'</span>;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="2-子查询作为计算字段"><a href="#2-子查询作为计算字段" class="headerlink" title="2.子查询作为计算字段"></a>2.子查询作为计算字段</h2><blockquote>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> cust_name,cust_state,(<span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> orders <span class="keyword">where</span> orders.cust_id=customers.cust_id) <span class="keyword">as</span> orders <span class="keyword">from</span> customers <span class="keyword">order</span> <span class="keyword">by</span> cust_name;</span><br></pre></td></tr></table></figure>

<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200710231213346.png" alt="image-20200710231213346" style="zoom: 80%;" />

<p><strong>解释</strong>：<code>select count(*) from orders where orders.cust_id=customers.cust_id</code>  的<strong>作用</strong>是：对于检索出的每个客户，统计其在orders表中的订单数目 。</p>
</blockquote>
<h1 id="第十五章——联结表"><a href="#第十五章——联结表" class="headerlink" title="第十五章——联结表"></a>第十五章——联结表</h1><p><em>本章将介绍什么是联结，为什么要使用联结，如何编写使用联结的SELECT语句。</em></p>
<h2 id="1-基础概念"><a href="#1-基础概念" class="headerlink" title="1.基础概念"></a>1.基础概念</h2><h3 id="1-1关系表"><a href="#1-1关系表" class="headerlink" title="1.1关系表"></a>1.1关系表</h3><blockquote>
<p>简单来说，就是两个表之间有一列数值是对应的，两个表的行之间是对应的。</p>
</blockquote>
<h3 id="1-2联结"><a href="#1-2联结" class="headerlink" title="1.2联结"></a>1.2联结</h3><blockquote>
<p>简单地说，联结是一种机制，用来在一条SELECT语句中关联表，因此称之为联结。使用特殊的语法，可以联结多个表返<br>回一组输出，联结在运行时关联表中正确的行。  </p>
</blockquote>
<h2 id="2-创建联结"><a href="#2-创建联结" class="headerlink" title="2.创建联结"></a>2.创建联结</h2><h3 id="2-1联结两个表"><a href="#2-1联结两个表" class="headerlink" title="2.1联结两个表"></a>2.1联结两个表</h3><blockquote>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> vend_name,prod_name,prod_price <span class="keyword">from</span> vendors,products <span class="keyword">where</span> vendors.vend_id=products.vend_id <span class="keyword">order</span> <span class="keyword">by</span> vend_name,prod_name;</span><br></pre></td></tr></table></figure>

<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200711212343072.png" alt="image-20200711212343072" style="zoom: 80%;" />

<p>vend_name是表vendors的数据， prod_name,prod_price是表products的数据。上面的语句把两个表的数据联结起来了</p>
<p>上面的例子也可以换个语法，</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> vend_name,prod_name,prod_price <span class="keyword">from</span> vendors <span class="keyword">inner</span> <span class="keyword">join</span> products <span class="keyword">on</span> vendors.vend_id=products.vend_id <span class="keyword">order</span> <span class="keyword">by</span> vend_name,prod_name;</span><br></pre></td></tr></table></figure>

<p>使用的是inner join语法</p>
</blockquote>
<h3 id="2-2联结多个表"><a href="#2-2联结多个表" class="headerlink" title="2.2联结多个表"></a>2.2联结多个表</h3><blockquote>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> vend_name,prod_name,prod_price,quantity <span class="keyword">from</span> vendors,products,orderitems <span class="keyword">where</span> vendors.vend_id=products.vend_id <span class="keyword">and</span> orderitems.prod_id=products.prod_id <span class="keyword">and</span> order_num=<span class="number">20005</span>;</span><br></pre></td></tr></table></figure>
</blockquote>
<h1 id="第十六章——创建高级联结"><a href="#第十六章——创建高级联结" class="headerlink" title="第十六章——创建高级联结"></a>第十六章——创建高级联结</h1><p><em>本章将讲解另外一些联结类型（包括它们的含义和使用方法），介绍如何对被联结的表使用表别名和聚集函数。</em></p>
<h2 id="1-使用表别名"><a href="#1-使用表别名" class="headerlink" title="1.使用表别名"></a>1.使用表别名</h2><blockquote>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> vend_name,prod_name,prod_price,quantity <span class="keyword">from</span> vendors <span class="keyword">as</span> v,products <span class="keyword">as</span> p,orderitems <span class="keyword">as</span> o <span class="keyword">where</span> v.vend_id=p.vend_id <span class="keyword">and</span> o.prod_id=p.prod_id <span class="keyword">and</span> order_num=<span class="number">20005</span>;</span><br></pre></td></tr></table></figure>

<p>给vendors ,products ,orderitems 三个表起了别名，目的是缩短SQL语句，方便多次使用表</p>
<p><strong>应该注意</strong>：表别名只在查询执行中使用。与列别名不一样，表别名不返回到客户机。  </p>
</blockquote>
<h2 id="2-使用不同类型的联结"><a href="#2-使用不同类型的联结" class="headerlink" title="2.使用不同类型的联结"></a>2.使用不同类型的联结</h2><h3 id="2-1自联结"><a href="#2-1自联结" class="headerlink" title="2.1自联结"></a>2.1自联结</h3><blockquote>
<p>问题：假如你发现某物品（其ID为DTNTR）存在问题，因此想知道生产该物品的供应商生产的其他物品是否也存在这些问题。此查询要求首先找到生产ID为DTNTR的物品的供应商，然后找出这个供应商生产的其他物品。  </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> p1.prod_id,p1.prod_name <span class="keyword">from</span> products <span class="keyword">as</span> p1,products <span class="keyword">as</span> p2 <span class="keyword">where</span> p1.vend_id=p2.vend_id <span class="keyword">and</span> p2.prod_id=<span class="string">'DTNTR'</span>;</span><br></pre></td></tr></table></figure>

<p>使用了自联结的方法，其实也可以使用子查询的方法。但有时候处理联结远比处理子查询快得多。  </p>
</blockquote>
<h3 id="2-2自然联结"><a href="#2-2自然联结" class="headerlink" title="2.2自然联结"></a>2.2自然联结</h3><h3 id="2-3外部联结"><a href="#2-3外部联结" class="headerlink" title="2.3外部联结"></a>2.3外部联结</h3><blockquote>
<p>许多联结将一个表中的行与另一个表中的行相关联。但有时候会需要包含没有关联行的那些行。</p>
<p><strong>比如</strong>：对每个客户下了多少订单进行计数，包括那些至今尚未下订单的客户；  </p>
<p>先来看一下两个表</p>
<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200711230412881.png" alt="image-20200711230412881" style="zoom:80%;" />

<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200711230615742.png" alt="image-20200711230615742" style="zoom:80%;" />

<p>表1是orders表，表2是customers表。根据问题，要讲customers表所有的cust_id全部列出来，哪怕他在orders表没数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> customers.cust_id,orders.order_num <span class="keyword">from</span> customers <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> orders <span class="keyword">on</span> customers.cust_id=orders.cust_id;</span><br></pre></td></tr></table></figure>

<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200711231050332.png" alt="image-20200711231050332" style="zoom:80%;" />

<p>输出显示，就算cust_id=10002在orders表里没有数据，一样会输出，只是显示NULL。这主要是<code>left outer join</code>的作用，left指定了将<code>left outer join</code>左边的表的左右行输出，即customers。如果left替换成right，则指orders表。</p>
</blockquote>
<h2 id="3-使用带聚集函数的联结"><a href="#3-使用带聚集函数的联结" class="headerlink" title="3.使用带聚集函数的联结"></a>3.使用带聚集函数的联结</h2><blockquote>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> customers.cust_name,customers.cust_id,<span class="keyword">count</span>(orders.order_num) <span class="keyword">as</span> num_ord <span class="keyword">from</span> customers <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> orders <span class="keyword">on</span> customers.cust_id=orders.cust_id <span class="keyword">group</span> <span class="keyword">by</span> customers.cust_id;</span><br></pre></td></tr></table></figure>

<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200712001103091.png" alt="image-20200712001103091" style="zoom:80%;" />
</blockquote>
<h1 id="第十七章——组合查询"><a href="#第十七章——组合查询" class="headerlink" title="第十七章——组合查询"></a>第十七章——组合查询</h1><p><em>本章讲述如何利用UNION操作符将多条SELECT语句组合成一个结果集。</em>  </p>
<blockquote>
<p>使用<strong>union</strong></p>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> vend_id,prod_id,prod_price <span class="keyword">from</span> products <span class="keyword">where</span> prod_price <span class="keyword">union</span> <span class="keyword">select</span> vend_id,prod_id,prod_price <span class="keyword">from</span> products <span class="keyword">where</span> vend_id <span class="keyword">IN</span> (<span class="number">1001</span>,<span class="number">1002</span>);</span><br></pre></td></tr></table></figure>

<p>UNION指示MySQL执行两条SELECT语句，并把输出组合成单个查询结果集。  </p>
<p><strong>union一些特性：</strong></p>
<blockquote>
<p>1.每个查询必须包含相同的列、表达式或聚集函数（不过分析各个列不需要以相同的次序列出）。  </p>
<p>2.UNION从查询结果集中自动去除了重复的行。若想保留重复行，可用UNION ALL  。</p>
<p>3.在用UNION组合查询时，只能使用一条ORDER BY子句，它必须出现在最后一条SELECT语句之后。  </p>
</blockquote>
</blockquote>
<h1 id="第十八章——全文本搜索"><a href="#第十八章——全文本搜索" class="headerlink" title="第十八章——全文本搜索"></a>第十八章——全文本搜索</h1><p><em>本章将学习如何使用MySQL的全文本搜索功能进行高级的数据查询和选择</em>  </p>
<h2 id="1-全文本搜索是什么？"><a href="#1-全文本搜索是什么？" class="headerlink" title="1.全文本搜索是什么？"></a>1.全文本搜索是什么？</h2><blockquote>
<p>是可以进行精确、多功能，高性能的文本搜索方式</p>
</blockquote>
<h2 id="2-使用方法-步骤-："><a href="#2-使用方法-步骤-：" class="headerlink" title="2.使用方法(步骤)："></a>2.使用方法(步骤)：</h2><blockquote>
<p><strong>（1）.创建表的时候要使用fulltext命令来对指定索引的列。</strong></p>
<p><strong>例子</strong>：（这个表在导入的时候已经存在了，这里只是演示怎么创建的，create table命令后面怎么用后面章节会讲，先理解fulltext作用）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> productnotes</span><br><span class="line">(</span><br><span class="line">    note_id  <span class="built_in">int</span>  <span class="keyword">not</span> <span class="literal">null</span> auto_increment,</span><br><span class="line">    prod_id  <span class="built_in">char</span>(<span class="number">10</span>)  <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">    note_date  datetime  <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">    note_text  <span class="built_in">text</span>  <span class="literal">null</span>,</span><br><span class="line">    primary <span class="keyword">key</span>(note_id),</span><br><span class="line">    fulltext(note_text)</span><br><span class="line">)<span class="keyword">engine</span>=myisam;</span><br></pre></td></tr></table></figure>

<p>这个例子fulltext(note_text)指定了全文本搜索时对note_text列进行搜索。</p>
<p><strong>（2）.进行全文本搜索</strong>  </p>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> note_text <span class="keyword">from</span> productnotes <span class="keyword">where</span> <span class="keyword">match</span>(note_text) against(<span class="string">'rabbit'</span>);</span><br></pre></td></tr></table></figure>

<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200714130019348.png" alt="image-20200714130019348" style="zoom:80%;" />

<p>productnotes表中的note_text列有两行含有rabbit，因此被检索出来了。其中，Match(note_text)指示MySQL针对指定的<br>列进行搜索， Against(‘rabbit’)指定词rabbit作为搜索文本。  </p>
</blockquote>
<h2 id="3-全文本搜索优点"><a href="#3-全文本搜索优点" class="headerlink" title="3.全文本搜索优点"></a>3.全文本搜索优点</h2><blockquote>
<p><strong>（1）</strong>相对于like+通配符,正则表达式这些来说，性能高</p>
<p><strong>（2）</strong>全文本搜索会根据被搜索文本出现的先后，次数等进行排序</p>
</blockquote>
<h2 id="4-使用查询扩展"><a href="#4-使用查询扩展" class="headerlink" title="4.使用查询扩展"></a>4.使用查询扩展</h2><blockquote>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> note_text <span class="keyword">from</span> productnotes <span class="keyword">where</span> <span class="keyword">match</span>(note_text) against(<span class="string">'anvils'</span> <span class="keyword">with</span> <span class="keyword">query</span> expansion);</span><br></pre></td></tr></table></figure>

<p><code>with query expansion</code>使得搜索结果不仅输出anvils所在行，还会输出带有<code>anvils所在行</code>其他单词的行，就是<code>anvils所在行</code>的其他单词，要是在其他行出现，会被认为相关，然后一起输出</p>
</blockquote>
<h2 id="5-布尔文本搜索"><a href="#5-布尔文本搜索" class="headerlink" title="5.布尔文本搜索"></a>5.布尔文本搜索</h2><blockquote>
<p>即使没有FULLTEXT索引也可以使用布尔文本搜索   </p>
<p>以布尔方式，可以提供关于如下内容的细节：</p>
<blockquote>
<p> 要匹配的词；<br> 要排斥的词（如果某行包含这个词，则不返回该行，即使它包含其他指定的词也是如此）；<br> 排列提示（指定某些词比其他词更重要，更重要的词等级更高）；<br> 表达式分组；<br> 另外一些内容  </p>
</blockquote>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> note_text <span class="keyword">from</span> productnotes <span class="keyword">where</span> <span class="keyword">match</span>(note_text) against (<span class="string">'heavy -ropes*'</span> <span class="keyword">in</span> <span class="built_in">boolean</span> <span class="keyword">mode</span>);</span><br></pre></td></tr></table></figure>

<p>添加<code>in boolean mode</code>代表进行布尔文本搜索，<code>-rope*</code>代表排除包含rope*（任何以rope开始的词，包括ropes）的行  。</p>
<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200714140336335.png" alt="image-20200714140336335" style="zoom: 67%;" />

<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200714140525598.png" alt="image-20200714140525598" style="zoom:80%;" />
</blockquote>
<h2 id="6-全文本搜索的使用说明"><a href="#6-全文本搜索的使用说明" class="headerlink" title="6.全文本搜索的使用说明"></a>6.全文本搜索的使用说明</h2><blockquote>
<p><strong>(1)</strong>在索引全文本数据时，短词被忽略且从索引中排除。短词定义为那些具有3个或3个以下字符的词（如果需要，这个数目可以更改）。<br><strong>(2)</strong> MySQL带有一个内建的非用词（stopword）列表，这些词在索引全文本数据时总是被忽略。如果需要，可以覆盖这个列表（请参阅MySQL文档以了解如何完成此工作）。<br><strong>(3)</strong>许多词出现的频率很高，搜索它们没有用处（返回太多的结果）。因此， MySQL规定了一条50%规则，如果一个词出现在50%以上的行中，则将它作为一个非用词忽略。 50%规则不用于IN BOOLEAN MODE。<br><strong>(4)</strong>如果表中的行数少于3行，则全文本搜索不返回结果（因为每个词或者不出现，或者至少出现在50%的行中）。<br><strong>(5)</strong> 忽略词中的单引号。例如， don’t索引为dont。<br><strong>(6)</strong>不具有词分隔符（包括日语和汉语）的语言不能恰当地返回全文本搜索结果。<br><strong>(7)</strong>如前所述，仅在MyISAM数据库引擎中支持全文本搜索。  </p>
</blockquote>
<h1 id="第十九章——插-入-数-据"><a href="#第十九章——插-入-数-据" class="headerlink" title="第十九章——插 入 数 据"></a>第十九章——插 入 数 据</h1><p><em>本章介绍如何利用SQL的INSERT语句将数据插入表中。</em>  </p>
<h2 id="1-插入行"><a href="#1-插入行" class="headerlink" title="1.插入行"></a>1.插入行</h2><blockquote>
<p>使用<code>insert into</code></p>
<p><strong>例子</strong>：给表customers添加了两行</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> customers(cust_name,cust_address,cust_city,cust_state,cust_zip,cust_country)</span><br><span class="line"><span class="keyword">values</span>(<span class="string">'tian'</span>,<span class="string">'dong shan street'</span>,<span class="string">'huazhou'</span>,<span class="string">'MI'</span>,<span class="string">'66666'</span>,<span class="string">'CH'</span>),</span><br><span class="line">      (<span class="string">'bin'</span>,<span class="string">'dong shan street'</span>,<span class="string">'huazhou'</span>,<span class="string">'MI'</span>,<span class="string">'66066'</span>,<span class="string">'CH'</span>);</span><br></pre></td></tr></table></figure>

<p><code>insert into</code>后面跟着表名，需要添加数据的列用括号括着。<code>values</code>指出需要添加的数据，需要按照前面的列名顺序添加。</p>
</blockquote>
<h2 id="2-插入检索出的数据"><a href="#2-插入检索出的数据" class="headerlink" title="2.插入检索出的数据"></a>2.插入检索出的数据</h2><blockquote>
<p><strong>例子</strong>：将表custnew的行插入到表customers中</p>
<p>假设A,B,C,D,E,F,G 是表custnew的列名。这个例子是把A列插入到cust_name，B列插入到cust_address，以此类推</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> customers(cust_name,cust_address,cust_city,cust_state,cust_zip,cust_country)</span><br><span class="line"><span class="keyword">select</span> A,B,C,D,E,F,G <span class="keyword">from</span> custnew;</span><br></pre></td></tr></table></figure>
</blockquote>
<h1 id="第二十章——更新和删除数据"><a href="#第二十章——更新和删除数据" class="headerlink" title="第二十章——更新和删除数据"></a>第二十章——更新和删除数据</h1><p><em>本章介绍如何利用UPDATE和DELETE语句进一步操纵表数据。</em>  </p>
<h2 id="1-更新数据"><a href="#1-更新数据" class="headerlink" title="1.更新数据"></a>1.更新数据</h2><blockquote>
<p>使用update语句</p>
<p><strong>例子1</strong>：给表customers里的一位客户添加邮箱地址</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> customers <span class="keyword">set</span> cust_email=<span class="string">'elmer@fudd.com'</span> <span class="keyword">where</span> cust_id=<span class="number">10005</span>;</span><br></pre></td></tr></table></figure>

<p><strong>例子1</strong>：更新表customers里的数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> customers <span class="keyword">set</span> cust_name=<span class="string">'The Fudds'</span>,cust_email=<span class="string">'elmer@fudd.com'</span> <span class="keyword">where</span> cust_id=<span class="number">10005</span>;</span><br></pre></td></tr></table></figure>

<p>记得不要漏了where语句，不然就会把全部行的数据都更新了。如果想删除某个列数值，可设置它为NULL  。</p>
<p><strong>ignore关键字</strong>： 如果用UPDATE语句更新多行，并且在更新这些行中的一行或多行时出一个现错误，则整个UPDATE操作被取消（错误发生前更新的所有行被恢复到它们原来的值）。为即使是发生错误，也继续进行更新，可使用IGNORE关键字，如下所示：UPDATE IGNORE customers…  </p>
</blockquote>
<h2 id="2-删除数据"><a href="#2-删除数据" class="headerlink" title="2.删除数据"></a>2.删除数据</h2><blockquote>
<p><strong>（1）删除整个行</strong>，使用delete语句</p>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> customers <span class="keyword">where</span> cust_id=<span class="number">10005</span>;</span><br></pre></td></tr></table></figure>

<p>（2）删除所有行，使用truncate table语句</p>
<p><strong>例子1</strong>：更新表customers里的</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> customers;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="3-注意点"><a href="#3-注意点" class="headerlink" title="3.注意点"></a>3.注意点</h2><blockquote>
<p>（1）小心使用 MySQL没有撤销（ undo）按钮。应该非常小心地使用UPDATE和DELETE，否则你会发现自己更新或删除了错误的数据。  </p>
<p>（2）在对UPDATE或DELETE语句使用WHERE子句前，应该先用SELECT进行测试，保证它过滤的是正确的记录，以防编写的WHERE子句不正确  。</p>
</blockquote>
<h1 id="第二十一章——创建和操纵表"><a href="#第二十一章——创建和操纵表" class="headerlink" title="第二十一章——创建和操纵表"></a>第二十一章——创建和操纵表</h1><p><em>本章讲授表的创建、更改和删除的基本知识。</em>  </p>
<h2 id="1-创建表"><a href="#1-创建表" class="headerlink" title="1.创建表"></a>1.创建表</h2><blockquote>
<p>使用create table</p>
<blockquote>
<p><strong>(1)</strong>表的<strong>主键</strong>可以在创建表时用<strong>PRIMARY KEY</strong>关键字指定。主键是用来标识表中每个行的列。  </p>
<p><strong>(2)</strong>每个表列或者是NULL列，或者是NOT NULL列，需要规定好。NULL为默认设置，如果不指定NOT NULL，则认为指定的是NULL。NULL代表该列可以是空的，NOT NULL代表该列一定要有值。</p>
<p><strong>(3)</strong> <strong>AUTO_INCREMENT</strong> :添加了AUTO_INCREMENT的列每当增加一行时自动增量  。</p>
<p><strong>(4)</strong> 指定默认值  :使用<strong>DEFAULT</strong> ，与AUTO_INCREMENT添加位置一样，比如添加default 1,那么这一列在没给出数值的时候就是默认值1。</p>
<p><strong>(5)</strong> <strong>引擎类型</strong> :可以看到下面例子的最后有个语句：ENGINE=InnoDB  ，这语句是用来配置引擎的，InnoDB是一个可靠的事务处理引擎  。除此之外还有MEMORY、MyISAM  </p>
</blockquote>
<p><strong>例子</strong>：表customers的创建</p>
<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200716164435258.png" alt="image-20200716164435258" style="zoom: 67%;" />
</blockquote>
<h2 id="2-操纵表"><a href="#2-操纵表" class="headerlink" title="2.操纵表"></a>2.操纵表</h2><h3 id="2-1-更新表"><a href="#2-1-更新表" class="headerlink" title="2.1 更新表"></a>2.1 更新表</h3><blockquote>
<p>使用ALTER TABLE语句  </p>
<p><strong>例子1</strong>：给表添加一个列  </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> vendors <span class="keyword">add</span> vend_phone <span class="built_in">char</span>(<span class="number">20</span>);</span><br></pre></td></tr></table></figure>

<p><strong>例子2</strong>：给表删除一个列  </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> vendors <span class="keyword">drop</span> <span class="keyword">column</span> vend_phone;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="2-2-删除表"><a href="#2-2-删除表" class="headerlink" title="2.2 删除表"></a>2.2 删除表</h3><blockquote>
<p>删除表（删除整个表而不是其内容） ,使用DROP TABLE语句，  与上一章的delete不一样，</p>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> vendors2;</span><br></pre></td></tr></table></figure>

<p>请谨慎使用！</p>
</blockquote>
<h3 id="2-3-重命名表"><a href="#2-3-重命名表" class="headerlink" title="2.3 重命名表"></a>2.3 重命名表</h3><blockquote>
<p>使用RENAME TABLE语句可以重命名一个表</p>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">rename</span> <span class="keyword">table</span> vendors <span class="keyword">to</span> vendor,vendor <span class="keyword">to</span> vendors;</span><br></pre></td></tr></table></figure>
</blockquote>
<h1 id="第二十二章——使-用-视-图"><a href="#第二十二章——使-用-视-图" class="headerlink" title="第二十二章——使 用 视 图"></a>第二十二章——使 用 视 图</h1><p><em>本章将介绍视图究竟是什么，它们怎样工作，何时使用它们。我们还将看到如何利用视图简化前面章节中执行的某些SQL操作。</em>  </p>
<h2 id="1-什么是视图"><a href="#1-什么是视图" class="headerlink" title="1. 什么是视图"></a>1. 什么是视图</h2><blockquote>
<p>简单来说，就是可以通过视图，呈现多个表数据的组合，在对视图进行检索、查看的时候，其实是通过一定的方式查看视图引用的表的数据，视图并没有像表这样实际数据。我们前面有学习了联结，联结的语句一般会比较复杂，利用视图就可以简化复杂语句的使用了。</p>
<p>再简而言之，视图就是对筛选的数据进行封装，但是它并没有真正的复制表的数据，只是引用。</p>
</blockquote>
<h2 id="2-使用视图注意点"><a href="#2-使用视图注意点" class="headerlink" title="2.使用视图注意点"></a>2.使用视图注意点</h2><blockquote>
<p><strong>（1）</strong>视图可以嵌套，即可以利用从其他视图中检索数据的查询来构造一个视图。<br><strong>（2）</strong>ORDER BY可以用在视图中，但如果从该视图检索数据SELECT中也含有ORDER BY，那么该视图中的ORDER BY将被覆盖。<br><strong>（3）</strong>视图不能索引，也不能有关联的触发器或默认值。<br><strong>（4）</strong>视图可以和表一起使用。例如，编写一条联结表和视图的SELECT语句。  </p>
</blockquote>
<h2 id="3-使用视图"><a href="#3-使用视图" class="headerlink" title="3.使用视图"></a>3.使用视图</h2><p><strong>创建视图</strong>：CREATE VIEW语句<br><strong>查看创建某视图的语句</strong>： 使用SHOW CREATE VIEW viewname（viewname是实际视图名字）<br><strong>删除视图：</strong>其语法为DROP VIEW viewname。<br><strong>更新视图时</strong>：可以先用DROP再用CREATE，也可以直接用CREATE ORREPLACE VIEW。</p>
<h3 id="3-1-利用视图简化复杂的联结"><a href="#3-1-利用视图简化复杂的联结" class="headerlink" title="3.1 利用视图简化复杂的联结"></a>3.1 利用视图简化复杂的联结</h3><blockquote>
<p><strong>例子</strong>：创建一个视图，呈现内容与<code>select customers.cust_id,orders.order_num from customers left outer join orders on customers.cust_id=orders.cust_id;</code>一致。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> customers_num <span class="keyword">as</span> <span class="keyword">select</span> customers.cust_id,orders.order_num <span class="keyword">from</span> customers <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> orders <span class="keyword">on</span> customers.cust_id=orders.cust_id;</span><br></pre></td></tr></table></figure>

<p>创建之后，可通过</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> customers_num;</span><br></pre></td></tr></table></figure>

<p>查看与上述联结语句一样的内容</p>
</blockquote>
<h3 id="3-2用视图过滤不想要的数据"><a href="#3-2用视图过滤不想要的数据" class="headerlink" title="3.2用视图过滤不想要的数据"></a>3.2用视图过滤不想要的数据</h3><blockquote>
<p>其实与利用视图简化联结一样用法</p>
<p><strong>例子</strong>：过滤没有邮箱的客户</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> customers_not_email <span class="keyword">as</span> <span class="keyword">select</span> cust_id,cust_name,cust_email <span class="keyword">from</span> customers <span class="keyword">where</span> cust_email <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span>;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>其他的视图创建都差不多，后面跟着select语句。</p>
<h1 id="第二十三章——使用存储过程"><a href="#第二十三章——使用存储过程" class="headerlink" title="第二十三章——使用存储过程"></a>第二十三章——使用存储过程</h1><p><em>本章介绍什么是存储过程，为什么要使用存储过程以及如何使用存储过程，并且介绍创建和使用存储过程的基本语法</em>。  </p>
<h2 id="1-什么是存储过程"><a href="#1-什么是存储过程" class="headerlink" title="1.什么是存储过程"></a>1.什么是存储过程</h2><blockquote>
<p>简单来说，存储过程的各语言里的子函数很像，把一些语句封装成块，使用的时候直接调用即可。</p>
</blockquote>
<h2 id="2-创建存储过程"><a href="#2-创建存储过程" class="headerlink" title="2.创建存储过程"></a>2.创建存储过程</h2><blockquote>
<p>使用<code>create procedure</code>语句</p>
<p><code>DELIMITER //</code>告诉命令行实用程序使用//作为新的语句结束分隔符 ，如果用<code>；</code>会报错</p>
<blockquote>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER //</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> ordertotal(<span class="keyword">IN</span> onumber <span class="built_in">INT</span>, <span class="keyword">OUT</span> ototal <span class="built_in">DECIMAL</span>(<span class="number">8</span>,<span class="number">2</span>))</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">SUM</span>(item_price*quantity) <span class="keyword">FROM</span> orderitems <span class="keyword">WHERE</span> order_num=onumber <span class="keyword">INTO</span> ototal;</span><br><span class="line"><span class="keyword">END</span>//</span><br></pre></td></tr></table></figure>

<p>创建完成后，下面是把分隔符换回<code>;</code>，调用存储过程，以及使用的截图</p>
<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200717151934659.png" alt="image-20200717151934659" style="zoom: 80%;" />
</blockquote>
</blockquote>
<h2 id="3-建立智能存储过程"><a href="#3-建立智能存储过程" class="headerlink" title="3.建立智能存储过程"></a>3.建立智能存储过程</h2><blockquote>
<p><strong>例子</strong>：对某些顾客增加增值税  </p>
<p><code>--</code>后面的是注释，<code>taxable</code>它是一个布尔值（如果要增加税则为真，否则为假）,<code>DECLARE</code>语句定义了两个局部变量。  <code>COMMENT</code>它不是必需的，但如果给出，将在SHOW PROCEDURE STATUS的结果中显示。  </p>
<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200717160912339.png" alt="image-20200717160912339" style="zoom: 67%;" />

<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200717161009835.png" alt="image-20200717161009835" style="zoom: 80%;" />

<p><strong>输入输出</strong>：</p>
<p><img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200717161248152.png" alt="image-20200717161248152"></p>
</blockquote>
<h2 id="4-检查存储过程"><a href="#4-检查存储过程" class="headerlink" title="4.检查存储过程"></a>4.检查存储过程</h2><blockquote>
<p>为显示用来创建一个存储过程的CREATE语句，使用SHOW CREATEPROCEDURE语句</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> ordertotal;</span><br></pre></td></tr></table></figure>
</blockquote>
<h1 id="第二十四章——使-用-游-标"><a href="#第二十四章——使-用-游-标" class="headerlink" title="第二十四章——使 用 游 标"></a>第二十四章——使 用 游 标</h1><p><em>本章将讲授什么是游标以及如何使用游标。</em></p>
<h2 id="1-什么是游标"><a href="#1-什么是游标" class="headerlink" title="1.什么是游标"></a>1.什么是游标</h2><blockquote>
<p>如果学过c语言，就比较好理解。游标的作用与指针类似。比如在一个操作里，需要对一个表的一千行进行有规律的操作，比如+1、+2、+3……，那么使用一千条语句就不现实了。此时就可以通过游标和循环，每次对一行操作，循环一千次。</p>
</blockquote>
<h2 id="2-使用游标"><a href="#2-使用游标" class="headerlink" title="2.使用游标"></a>2.使用游标</h2><blockquote>
<p><strong>创建游标</strong>: 用<code>DECLARE ....CURSOR</code>语句创建 。</p>
<p><strong>打开和关闭游标</strong>：用<code>OPEN</code>语句来打开  ，用<code>CLOSE</code>语句来打开,如果你不明确关闭游标， MySQL将会在到达END语句时自动关闭它。  </p>
<p><strong>使用游标数据</strong>  :游标被打开后，可以使用FETCH语句分别访问它的每一行。FETCH指定检索什么数据（所需的列），检索出来的数据存储在什么地方。它还向前移动游标中的内部行指针，使下一条FETCH语句检索下一行（不重复读取同一行）。  </p>
</blockquote>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER //</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> processorders()</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="comment">--声明局部变量</span></span><br><span class="line">	<span class="keyword">DECLARE</span> done <span class="built_in">BOOLEAN</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">DECLARE</span> o <span class="built_in">INT</span>;</span><br><span class="line">	<span class="keyword">DECLARE</span> t <span class="built_in">DECIMAL</span>(<span class="number">8</span>,<span class="number">2</span>);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">--声明游标</span></span><br><span class="line">	<span class="keyword">DECLARE</span> ordernumbers <span class="keyword">CURSOR</span></span><br><span class="line">	<span class="keyword">FOR</span></span><br><span class="line">	<span class="keyword">SELECT</span> order_num <span class="keyword">FROM</span> orders;</span><br><span class="line">	<span class="comment">--定义了一个CONTINUE HANDLER，它是在条件出现时被执行的代码。这里它指出当SQLSTATE'02000'出现时，SET done=1。</span></span><br><span class="line">	<span class="keyword">DECLARE</span> CONTINUE <span class="keyword">HANDLER</span> <span class="keyword">FOR</span> <span class="keyword">SQLSTATE</span> <span class="string">'02000'</span> <span class="keyword">SET</span> done=<span class="number">1</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">--创建一个表存数据</span></span><br><span class="line">	<span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> ordertotals</span><br><span class="line">	</span><br><span class="line">	<span class="comment">--打开游标</span></span><br><span class="line">	<span class="keyword">OPEN</span> ordernumbers;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">--重复使用FETCH</span></span><br><span class="line">	REPEAT FETCH ordernumbers INTO o;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">--掉用前面增加增值税的存储过程，并且返回结果</span></span><br><span class="line">	<span class="keyword">CALL</span> ordertotal(o,<span class="number">1</span>,t);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">--保存数据，十九章内容</span></span><br><span class="line">	<span class="keyword">INSERT</span> <span class="keyword">INTO</span> ordertotals(order_num,total) <span class="keyword">VALUES</span>(o,t);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">--结束循环</span></span><br><span class="line">	UNTIL done <span class="keyword">END</span> <span class="keyword">REPEAT</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">--关闭游标</span></span><br><span class="line">	CLOSE ordernumbers;</span><br><span class="line">	</span><br><span class="line"><span class="keyword">END</span>//</span><br></pre></td></tr></table></figure>



<h1 id="第二十五章——使用触发器"><a href="#第二十五章——使用触发器" class="headerlink" title="第二十五章——使用触发器"></a>第二十五章——使用触发器</h1><p><em>本章学习什么是触发器，为什么要使用触发器以及如何使用触发器。本章还介绍创建和使用触发器的语法。</em>  </p>
<p>如果你想要某条语句（或某些语句）在事件发生时自动执行，怎么办呢？ 答案：使用<strong>触发器</strong> </p>
<p><strong>要点</strong>：</p>
<blockquote>
<p><strong>（1）</strong>触发器只能触发的语句：<strong>DELETE、 INSERT、UPDATE</strong>。  </p>
<p><strong>（2）</strong>只有表才支持触发器，视图不支持（临时表也不支持）。  </p>
<p><strong>（3）</strong> 触发器自带一些虚拟表，比如NEW,OLD。</p>
</blockquote>
<h2 id="1-创建触发器"><a href="#1-创建触发器" class="headerlink" title="1.创建触发器"></a>1.创建触发器</h2><blockquote>
<blockquote>
<p><strong>创建触发器要求：</strong><br> 唯一的触发器名；<br> 触发器关联的表；<br> 触发器应该响应的活动（DELETE、 INSERT或UPDATE）；<br> 触发器何时执行（处理之前或之后）。  </p>
</blockquote>
<p>用<code>CREATE TRIGGER</code>语句创建  </p>
<p><strong>例子</strong>：这个例子暂时有问题</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--文本Productadded将对每个插入的行显示一次。</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> newproduct <span class="keyword">AFTER</span> <span class="keyword">INSERT</span> <span class="keyword">ON</span> products <span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="keyword">ROW</span> <span class="keyword">SELECT</span> <span class="string">'product added'</span> <span class="keyword">INTO</span> @tip;</span><br></pre></td></tr></table></figure>

<p>测试一下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO products(prod_id,vend_id,prod_name,prod_price,prod_desc)</span><br><span class="line">VALUES(&#39;tian&#39;,1003,&#39;yutian&#39;,10,&#39;sss&#39;);</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="2-删除触发器"><a href="#2-删除触发器" class="headerlink" title="2.删除触发器"></a>2.删除触发器</h2><blockquote>
<p>和前面的删除语句一样</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TRIGGER</span> newproduct;</span><br></pre></td></tr></table></figure>
</blockquote>
<h1 id="第二十六章——管理事务处理"><a href="#第二十六章——管理事务处理" class="headerlink" title="第二十六章——管理事务处理"></a>第二十六章——管理事务处理</h1><p><em>本章介绍什么是事务处理以及如何利用COMMIT和ROLLBACK语句来管理事务处理</em>  </p>
<h2 id="1-什么是事务处理"><a href="#1-什么是事务处理" class="headerlink" title="1.什么是事务处理"></a>1.什么是事务处理</h2><blockquote>
<p><strong>事务处理</strong>是一种机制，用来管理必须成批执行的MySQL操作，以保证数据库不包含不完整的操作结果。<strong>通俗点</strong>来说就是用来避免因为一些故障导致sql语句执行到一半就停止了，然后产生了错误的数据。</p>
<p>事务处理以<code>START TRANSACTION;</code>开始，有点类似一个函数块，然后可以利用一些语句对整个事务处理进行控制。</p>
</blockquote>
<h2 id="2-使用ROLLBACK"><a href="#2-使用ROLLBACK" class="headerlink" title="2.使用ROLLBACK"></a>2.使用ROLLBACK</h2><blockquote>
<p>ROLLBACK命令用来回退（撤销） MySQL语句</p>
<p><strong>注意：</strong></p>
<blockquote>
<p><strong>(1)</strong>ROLLBACK只能在一个事务处理内使用（在执行一条STARTTRANSACTION命令之后）。  </p>
<p><strong>(2)</strong>不能回退SELECT语句。（这样做也没有什么意义。）不能回退CREATE或DROP操作。  </p>
</blockquote>
<p><strong>例子</strong> :撤销删除操作</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> orders;</span><br><span class="line"><span class="keyword">START</span> <span class="keyword">TRANSACTION</span>;</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> orders;</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> orders;</span><br><span class="line"><span class="keyword">ROLLBACK</span>;</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> orders;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="2-使用COMMIT"><a href="#2-使用COMMIT" class="headerlink" title="2.使用COMMIT"></a>2.使用COMMIT</h2><blockquote>
<p>为进行明确的提交，使用COMMIT语句。也就是COMMIT用来保证语句执行完毕无误后再提交结果</p>
<p><strong>例子</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">START</span> <span class="keyword">TRANSACTION</span>;</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> orderitems <span class="keyword">WHERE</span> order_num = <span class="number">20010</span>;</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> orders <span class="keyword">WHERE</span> order_num = <span class="number">20010</span>;</span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br></pre></td></tr></table></figure>

<p>最后的COMMIT语句仅在不出错时写出更改。如果第一条DELETE起作用，但第二条失败，则DELETE不会提交（实际上，它是被自动撤销的）。  </p>
</blockquote>
<h2 id="3-使用保留点"><a href="#3-使用保留点" class="headerlink" title="3.使用保留点"></a>3.使用保留点</h2><blockquote>
<p>ROLLBACK和COMMIT语句可以写入或撤销整个事务处理。但是复杂的事务处理可能需要部分提交或回退。便可以使用保留点</p>
<p>使用SAVEPOINT语句 创建保留点</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SAVEPOINT</span> goback;</span><br></pre></td></tr></table></figure>

<p> goback就是保留点名称，如果需要返回保留点，就用</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ROLLBACK</span> <span class="keyword">TO</span> goback;</span><br></pre></td></tr></table></figure>

<p>释放保留点就用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RELEASE SAVEPOINT goback;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="4-更改默认的提交行为"><a href="#4-更改默认的提交行为" class="headerlink" title="4.更改默认的提交行为"></a>4.更改默认的提交行为</h2><blockquote>
<p>在事务处理里，每一个语句都是立刻执行并提交的，如果想指示MySQL不自动提交更改  ，可以用以下语句</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> autocommit=<span class="number">0</span>;</span><br></pre></td></tr></table></figure>

<p>以及</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> autocommit=<span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<p>设置autocommit为0（假）指示MySQL不自动提交更改（直到autocommit被设置为真为止）。  </p>
</blockquote>
<h1 id="第二十七章——全球化和本地化"><a href="#第二十七章——全球化和本地化" class="headerlink" title="第二十七章——全球化和本地化"></a>第二十七章——全球化和本地化</h1><p><em>本章介绍MySQL处理不同字符集和语言的基础知识。</em>  </p>
<h2 id="1-字符集和校对顺序"><a href="#1-字符集和校对顺序" class="headerlink" title="1.字符集和校对顺序"></a>1.字符集和校对顺序</h2><blockquote>
<p><strong>(1)显示所有可用的字符集以及每个字符集的描述和默认校对:</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="built_in">CHARACTER</span> <span class="keyword">SET</span>;</span><br></pre></td></tr></table></figure>

<p><strong>(2)显示所有可用的校对，以及它们适用的字符集</strong>  :</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">COLLATION</span>;</span><br></pre></td></tr></table></figure>

<p><strong>(3)给表指定字符集和校对</strong>  </p>
<p>此语句创建一个包含两列的表，并且指定一个字符集和一个校对顺序。  </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> mytable</span><br><span class="line">(</span><br><span class="line">	columnn1 <span class="built_in">INT</span>,</span><br><span class="line">	COLUMNN2 <span class="built_in">VARCHAR</span>(<span class="number">10</span>))</span><br><span class="line"><span class="keyword">DEFAULT</span> <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> hebrew</span><br><span class="line"><span class="keyword">COLLATE</span> hebrew_general_ci;</span><br></pre></td></tr></table></figure>

<p><strong>(4)对每个列指定字符集个校对</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> mytable</span><br><span class="line">(</span><br><span class="line">	columnn1 <span class="built_in">INT</span>,</span><br><span class="line">	COLUMNN2 <span class="built_in">VARCHAR</span>(<span class="number">10</span>),</span><br><span class="line">	column3 <span class="built_in">VARCHAR</span>(<span class="number">10</span>) <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> latin1 <span class="keyword">COLLATE</span> latin1_general_ci)</span><br><span class="line"><span class="keyword">DEFAULT</span> <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> hebrew</span><br><span class="line"><span class="keyword">COLLATE</span> hebrew_general_ci;</span><br></pre></td></tr></table></figure>


</blockquote>
<h1 id="第二十八章——安-全-管-理"><a href="#第二十八章——安-全-管-理" class="headerlink" title="第二十八章——安 全 管 理"></a>第二十八章——安 全 管 理</h1><p><em>数据库服务器通常包含关键的数据，确保这些数据的安全和完整需要利用访问控制。本章将学习MySQL的访问控制和用户管理。</em>  </p>
<h2 id="1-创建，重命名，删除用户"><a href="#1-创建，重命名，删除用户" class="headerlink" title="1.创建，重命名，删除用户"></a>1.创建，重命名，删除用户</h2><blockquote>
<p><strong>（1）创建用户</strong></p>
<p>使用CREATE USER语句  </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> tian1 <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'111111'</span>;</span><br></pre></td></tr></table></figure>

<p><code>tian1</code>是用户名，<code>111111</code>是密码。不过创建新用户不一定需要设置密码。</p>
<p><strong>（2）重命名</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">RENAME</span> <span class="keyword">USER</span> tian1 <span class="keyword">TO</span> tiantian;</span><br></pre></td></tr></table></figure>

<p><strong>（3）删除</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">USER</span> tiantian;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="2-设置访问权限"><a href="#2-设置访问权限" class="headerlink" title="2.设置访问权限"></a>2.设置访问权限</h2><p>在创建用户账号后，必须接着分配访问权限。新创建的用户账号没有访问权限。它们能登录MySQL，但不能看到数据，不能执行任何数据库操作。  </p>
<blockquote>
<p><strong>(1)查看权限</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">GRANTS</span> <span class="keyword">FOR</span> tian1;</span><br></pre></td></tr></table></figure>

<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200719135438219.png" alt="image-20200719135438219" style="zoom: 80%;" />

<p><code>USAGE ON *.*</code>：<code>USAGE</code>表示没有权限，<code>*.*</code>表示任意数据库以及任意表。所以，此结果表示在任意数据库和任意表上对任何东西没有权限。  </p>
<p><strong>（2）添加权限</strong></p>
<p>使用GRANT语句  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRANT SELECT,INSERT ON crashcourses.* TO tian1;</span><br></pre></td></tr></table></figure>

<p>此GRANT允许用户在crashcourse.*（crashcourse数据库的所有表）上使用SELECT。  </p>
<p><strong>（3）删除权限</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">SELECT</span> <span class="keyword">ON</span> crashcourse.* <span class="keyword">FROM</span> tian1;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="3-更改密码"><a href="#3-更改密码" class="headerlink" title="3.更改密码"></a>3.更改密码</h2><blockquote>
<p>使用SET PASSWORD语句  </p>
<p><strong>例子1：</strong>更改tian1的密码</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> <span class="keyword">PASSWORD</span> <span class="keyword">FOR</span> tian1=<span class="keyword">Password</span>(<span class="string">'222222'</span>);</span><br></pre></td></tr></table></figure>

<p><strong>例子1：</strong>更改当前登录用户的密码</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> <span class="keyword">PASSWORD</span> =<span class="keyword">Password</span>(<span class="string">'222222'</span>);</span><br></pre></td></tr></table></figure>
</blockquote>
<h1 id="第二十九章——数据库维护"><a href="#第二十九章——数据库维护" class="headerlink" title="第二十九章——数据库维护"></a>第二十九章——数据库维护</h1><p><em>本章学习如何进行常见的数据库维护。</em>  </p>
<blockquote>
<p><strong>(1)</strong>ANALYZE TABLE，用来检查表键是否正确。  </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ANALYZE</span> <span class="keyword">TABLE</span> orders;</span><br></pre></td></tr></table></figure>

<img src="http://tetedetian.oss-cn-shenzhen.aliyuncs.com/img/image-20200719150555529.png" alt="image-20200719150555529" style="zoom:80%;" />

<p>(2)</p>
</blockquote>
<h1 id="第三十章——改善性能"><a href="#第三十章——改善性能" class="headerlink" title="第三十章——改善性能"></a>第三十章——改善性能</h1><p><em>本章将复习与MySQL性能有关的某些要点。</em></p>
<blockquote>
<p>（1）MySQL是用一系列的默认设置预先配置的，从这些设置开始通常是没问题的。但过一段时间后你可能需要调整内存分配、缓冲区大小等。（为查看当前设置，可使用 SHOW VARIABLES;和 SHOW STATUS;。）<br>（2）MySQL一个多用户多线程的DBMS，换言之，它经常同时执行多个任务。如果这些任务中的某一个执行缓慢，则所有请求都会执行缓慢。如果你遇到显著的性能不良，可使用SHOW PROCESSLIST显示所有活动进程（以及它们的线程ID和执行时间）。你还可以用KILL命令终结某个特定的进程（使用这个命令需要作为管理员登录）。<br>（3）总是有不止一种方法编写同一条SELECT语句。 应该试验联结、并、子查询等，找出最佳的方法。<br>（4）使用EXPLAIN语句让MySQL解释它将如何执行一条SELECT语句。<br>（5）一般来说，存储过程执行得比一条一条地执行其中的各条MySQL语句快。<br>（6）应该总是使用正确的数据类型。<br>（7）决不要检索比需求还要多的数据。换言之，不要用SELECT *（除非你真正需要每个列）。<br>（8） 有的操作（包括INSERT）支持一个可选的DELAYED关键字，如果使用它，将把控制立即返回给调用程序，并且一旦有可能就实际执行该操作。<br>（9）在导入数据时，应该关闭自动提交。你可能还想删除索引（包括FULLTEXT索引），然后在导入完成后再重建它们。<br>（10）必须索引数据库表以改善数据检索的性能。<br>（11）你的SELECT语句中有一系列复杂的OR条件吗？通过使用多条SELECT语句和连接它们的UNION语句，你能看到极大的性能改<br>进。<br>（12）索引改善数据检索的性能，但损害数据插入、删除和更新的性能。如果你有一些表，它们收集数据且不经常被搜索，则在有必要之前不要索引它们。（索引可根据需要添加和删除。）<br>（13）LIKE很慢。一般来说，最好是使用FULLTEXT而不是LIKE。<br>（14）数据库是不断变化的实体。一组优化良好的表一会儿后可能就面目全非了。由于表的使用和内容的更改，理想的优化和配置也会改变。</p>
</blockquote>

          
            <div class='article_footer'>
              
                
  
    
    



  

  
    
    



  

  
    
    

<section class="widget copyright  desktop mobile">
  <div class='content'>
    
      <blockquote>
        
          
            <p>博客内容遵循 署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0) 协议</p>

          
        
          
            <p>本文永久链接是：<a href=https://tetedetian2.github.io/2020/07/20/MySQL%E7%AC%94%E8%AE%B0/>https://tetedetian2.github.io/2020/07/20/MySQL%E7%AC%94%E8%AE%B0/</a></p>
          
        
      </blockquote>
    
  </div>
</section>

  

  
    
    

<section class="widget qrcode  desktop mobile">
  

  <div class='content article-entry'>
    
  </div>
</section>

  


              
            </div>
          
        </div>
        
          


  <section class='meta' id="footer-meta">
    <div class='new-meta-box'>
      
        
          <div class="new-meta-item date" itemprop="dateUpdated" datetime="2020-07-19T16:19:09+08:00">
  <a class='notlink'>
    <i class="fas fa-edit fa-fw" aria-hidden="true"></i>
    <p>更新于：Jul 19, 2020</p>
  </a>
</div>

        
      
        
          
  
  <div class="new-meta-item meta-tags"><a class="tag" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="nofollow"><i class="fas fa-hashtag fa-fw" aria-hidden="true"></i><p>数据库</p></a></div>


        
      
        
          

        
      
        
          
  <div class="new-meta-item share -mob-share-list">
  <div class="-mob-share-list share-body">
    
      
        <a class="-mob-share-qq" title="" rel="external nofollow noopener noreferrer"
          
          href="http://connect.qq.com/widget/shareqq/index.html?url=https://tetedetian2.github.io/2020/07/20/MySQL%E7%AC%94%E8%AE%B0/&title=MySQL基础知识点 - 特特的天&summary=这里，有MySQL的一些基础知识点^_^"
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/qq.png">
          
        </a>
      
    
      
        <a class="-mob-share-qzone" title="" rel="external nofollow noopener noreferrer"
          
          href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://tetedetian2.github.io/2020/07/20/MySQL%E7%AC%94%E8%AE%B0/&title=MySQL基础知识点 - 特特的天&summary=这里，有MySQL的一些基础知识点^_^"
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/qzone.png">
          
        </a>
      
    
      
        <a class="-mob-share-weibo" title="" rel="external nofollow noopener noreferrer"
          
          href="http://service.weibo.com/share/share.php?url=https://tetedetian2.github.io/2020/07/20/MySQL%E7%AC%94%E8%AE%B0/&title=MySQL基础知识点 - 特特的天&summary=这里，有MySQL的一些基础知识点^_^"
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/weibo.png">
          
        </a>
      
    
  </div>
</div>



        
      
    </div>
  </section>


        
        
          <div class="prev-next">
            
              <a class='prev' href='/2020/07/20/yilia%E4%B8%BB%E9%A2%98%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/'>
                <p class='title'><i class="fas fa-chevron-left" aria-hidden="true"></i>yilia主题使用方法</p>
                <p class='content'>这里，有yilia主题的配置方法及一些问题的解决方法，希望对你有帮助^_^



置顶文章、文章阅读数统计、鼠标点击小红心的设置以及一些其他的功能添加，点这里


注意：文章中下图这个地方有错，...</p>
              </a>
            
            
              <a class='next' href='/2020/07/20/markdown%E5%B0%8F%E6%8A%80%E5%B7%A7/'>
                <p class='title'>markdown小技巧<i class="fas fa-chevron-right" aria-hidden="true"></i></p>
                <p class='content'>markdown的基础语法以及一些稍微高级的用法




markdown是什么？
百度百科：Markdown是一种可以使用普通文本编辑器编写的标记语言，通过简单的标记语法，它可以使普通文本内容...</p>
              </a>
            
          </div>
        
      </section>
    </article>
  

  
    
  <article class="post white-box reveal comments shadow">
    <section class="article typo">
      <p ct><i class='fas fa-comments'></i> 评论</p>
      
      <section id="comments">
        <div id="valine_container" class="valine_thread">
  <i class="fas fa-cog fa-spin fa-fw fa-2x"></i>
</div>

      </section>
    </section>
  </article>


  




<!-- 根据页面mathjax变量决定是否加载MathJax数学公式js -->


</div>
<aside class='l_side'>
  
  

  
    
    



  <section class="widget toc-wrapper shadow desktop mobile" id="toc-div" >
    
  <header>
    
      <i class="fas fa-list fa-fw" aria-hidden="true"></i><span class='name'>本文目录</span>
    
  </header>


    <div class='content'>
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL"><span class="toc-text">SQL:</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据库："><span class="toc-text">数据库：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据库组成"><span class="toc-text">数据库组成</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL"><span class="toc-text">MySQL</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-基本命令"><span class="toc-text">1.基本命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1创建新数据库"><span class="toc-text">1.1创建新数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2查看数据库"><span class="toc-text">1.2查看数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3使用某个数据库"><span class="toc-text">1.3使用某个数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4查看数据库的表"><span class="toc-text">1.4查看数据库的表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5查看表的列信息"><span class="toc-text">1.5查看表的列信息</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-简单检索"><span class="toc-text">1.简单检索</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1检索单列"><span class="toc-text">1.1检索单列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2检索多个列"><span class="toc-text">1.2检索多个列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3检索所有列"><span class="toc-text">1.3检索所有列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4检索不同行"><span class="toc-text">1.4检索不同行</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-限制结果检索"><span class="toc-text">2.限制结果检索</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1限制行数"><span class="toc-text">2.1限制行数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2使用完全限定的表名"><span class="toc-text">2.2使用完全限定的表名</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-根据一个列排序"><span class="toc-text">1.根据一个列排序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-根据多个列排序"><span class="toc-text">2.根据多个列排序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-指定排序方向"><span class="toc-text">3.指定排序方向</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-排序并限制输出数量"><span class="toc-text">4.排序并限制输出数量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-相等检查"><span class="toc-text">1.相等检查</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-范围值检查"><span class="toc-text">2.范围值检查</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-空值检查"><span class="toc-text">3.空值检查</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-其他的where子句操作符"><span class="toc-text">4.其他的where子句操作符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-一些注意点："><span class="toc-text">5.一些注意点：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-and操作符"><span class="toc-text">1.and操作符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-or操作符"><span class="toc-text">2.or操作符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-and与or优先级"><span class="toc-text">3.and与or优先级</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-in操作符"><span class="toc-text">4.in操作符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-not操作符"><span class="toc-text">5.not操作符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-like操作符（是一种谓词"><span class="toc-text">1.like操作符（是一种谓词)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-百分号（-）通配符"><span class="toc-text">2.百分号（%）通配符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-下划线（-）通配符"><span class="toc-text">3.下划线（_）通配符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-基本字符匹配"><span class="toc-text">1.基本字符匹配</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-进行或匹配"><span class="toc-text">2.进行或匹配</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-匹配几个字符之一"><span class="toc-text">3.匹配几个字符之一</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-匹配范围"><span class="toc-text">4.匹配范围</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-匹配特殊字符"><span class="toc-text">5.匹配特殊字符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-匹配字符类"><span class="toc-text">6.匹配字符类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-匹配多次出现"><span class="toc-text">7.匹配多次出现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-定位符"><span class="toc-text">8.定位符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-拼接字段"><span class="toc-text">1.拼接字段</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-使用别名"><span class="toc-text">2.使用别名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-执行算数计算"><span class="toc-text">3.执行算数计算</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-文本处理函数"><span class="toc-text">1.文本处理函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-日期和时间处理函数"><span class="toc-text">2.日期和时间处理函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-数值处理函数"><span class="toc-text">3.数值处理函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#count-函数"><span class="toc-text">count()函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#distinct参数"><span class="toc-text">distinct参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-创建分组"><span class="toc-text">1.创建分组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-过滤分组"><span class="toc-text">2.过滤分组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-分组和排序"><span class="toc-text">3.分组和排序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-利用子查询进行过滤"><span class="toc-text">1.利用子查询进行过滤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-子查询作为计算字段"><span class="toc-text">2.子查询作为计算字段</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-基础概念"><span class="toc-text">1.基础概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1关系表"><span class="toc-text">1.1关系表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2联结"><span class="toc-text">1.2联结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-创建联结"><span class="toc-text">2.创建联结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1联结两个表"><span class="toc-text">2.1联结两个表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2联结多个表"><span class="toc-text">2.2联结多个表</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-使用表别名"><span class="toc-text">1.使用表别名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-使用不同类型的联结"><span class="toc-text">2.使用不同类型的联结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1自联结"><span class="toc-text">2.1自联结</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2自然联结"><span class="toc-text">2.2自然联结</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3外部联结"><span class="toc-text">2.3外部联结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-使用带聚集函数的联结"><span class="toc-text">3.使用带聚集函数的联结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-全文本搜索是什么？"><span class="toc-text">1.全文本搜索是什么？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-使用方法-步骤-："><span class="toc-text">2.使用方法(步骤)：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-全文本搜索优点"><span class="toc-text">3.全文本搜索优点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-使用查询扩展"><span class="toc-text">4.使用查询扩展</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-布尔文本搜索"><span class="toc-text">5.布尔文本搜索</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-全文本搜索的使用说明"><span class="toc-text">6.全文本搜索的使用说明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-插入行"><span class="toc-text">1.插入行</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-插入检索出的数据"><span class="toc-text">2.插入检索出的数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-更新数据"><span class="toc-text">1.更新数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-删除数据"><span class="toc-text">2.删除数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-注意点"><span class="toc-text">3.注意点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-创建表"><span class="toc-text">1.创建表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-操纵表"><span class="toc-text">2.操纵表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-更新表"><span class="toc-text">2.1 更新表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-删除表"><span class="toc-text">2.2 删除表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-重命名表"><span class="toc-text">2.3 重命名表</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-什么是视图"><span class="toc-text">1. 什么是视图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-使用视图注意点"><span class="toc-text">2.使用视图注意点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-使用视图"><span class="toc-text">3.使用视图</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-利用视图简化复杂的联结"><span class="toc-text">3.1 利用视图简化复杂的联结</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2用视图过滤不想要的数据"><span class="toc-text">3.2用视图过滤不想要的数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-什么是存储过程"><span class="toc-text">1.什么是存储过程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-创建存储过程"><span class="toc-text">2.创建存储过程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-建立智能存储过程"><span class="toc-text">3.建立智能存储过程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-检查存储过程"><span class="toc-text">4.检查存储过程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-什么是游标"><span class="toc-text">1.什么是游标</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-使用游标"><span class="toc-text">2.使用游标</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-创建触发器"><span class="toc-text">1.创建触发器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-删除触发器"><span class="toc-text">2.删除触发器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-什么是事务处理"><span class="toc-text">1.什么是事务处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-使用ROLLBACK"><span class="toc-text">2.使用ROLLBACK</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-使用COMMIT"><span class="toc-text">2.使用COMMIT</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-使用保留点"><span class="toc-text">3.使用保留点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-更改默认的提交行为"><span class="toc-text">4.更改默认的提交行为</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-字符集和校对顺序"><span class="toc-text">1.字符集和校对顺序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-创建，重命名，删除用户"><span class="toc-text">1.创建，重命名，删除用户</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-设置访问权限"><span class="toc-text">2.设置访问权限</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-更改密码"><span class="toc-text">3.更改密码</span></a></li></ol>
    </div>
  </section>


  


</aside>



    </div>
    
  
  <footer class="clearfix">
    <br><br>
    
      
        <div class="aplayer-container">
          

  
    <meting-js
      theme='#1BCDFC'
      autoplay='false'
      volume='0.7'
      loop='all'
      order='list'
      fixed='false'
      list-max-height='340px'
      server='netease'
      type='playlist'
      id='3175833810'
      list-folded='true'>
    </meting-js>
  


        </div>
      
    
      
        <br>
        <div class="social-wrapper">
          
            
              <a href="/atom.xml"
                class="social fas fa-rss flat-btn"
                target="_blank"
                rel="external nofollow noopener noreferrer">
              </a>
            
          
            
              <a href="mailto:me@xaoxuu.com"
                class="social fas fa-envelope flat-btn"
                target="_blank"
                rel="external nofollow noopener noreferrer">
              </a>
            
          
            
              <a href="https://github.com/xaoxuu"
                class="social fab fa-github flat-btn"
                target="_blank"
                rel="external nofollow noopener noreferrer">
              </a>
            
          
            
              <a href="https://music.163.com/#/user/home?id=63035382"
                class="social fas fa-headphones-alt flat-btn"
                target="_blank"
                rel="external nofollow noopener noreferrer">
              </a>
            
          
        </div>
      
    
      
        <div><p>Blog content follows the <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" rel="noopener">Attribution-NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA 4.0) License</a></p>
</div>
      
    
      
        Use
        <a href="https://volantis.js.org/" target="_blank" class="codename">Volantis</a>
        as theme, total visits
          <span id="busuanzi_value_site_pv"><i class="fas fa-circle-notch fa-spin fa-fw" aria-hidden="true"></i></span>
          times
        
      
    
      
        <div class='copyright'>
        <p><a href="https://xaoxuu.com" target="_blank" rel="noopener">Copyright © 2017-2020 Mr. X</a></p>

        </div>
      
    
  </footer>


    <a class="s-top fas fa-arrow-up fa-fw" href='javascript:void(0)'></a>
  </div>
  <div>
    
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4/dist/jquery.min.js"></script>



  <script>
    
    var SEARCH_SERVICE = "hexo" || "hexo";
    var ROOT = "/" || "/";
    if (!ROOT.endsWith('/')) ROOT += '/';
  </script>





  <script async src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2/js/instant_page.js" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>



  
  
  
    
<script src="https://cdn.jsdelivr.net/npm/jquery-backstretch@2.1.18/jquery.backstretch.min.js"></script>

    <script type="text/javascript">
      $(function(){
        var imgs=["https://cdn.jsdelivr.net/gh/xaoxuu/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg", "https://cdn.jsdelivr.net/gh/xaoxuu/cdn-wallpaper/abstract/BBC19066-E176-47C2-9D22-48C81EE5DF6B.jpeg", "https://cdn.jsdelivr.net/gh/xaoxuu/cdn-wallpaper/abstract/B18FCBB3-67FD-48CC-B4F3-457BA145F17A.jpeg", "https://cdn.jsdelivr.net/gh/xaoxuu/cdn-wallpaper/abstract/35F12181-F0E9-45BD-B134-37E4B4A660CF.jpeg", "https://cdn.jsdelivr.net/gh/xaoxuu/cdn-wallpaper/abstract/00E0F0ED-9F1C-407A-9AA6-545649D919F4.jpeg", "https://cdn.jsdelivr.net/gh/xaoxuu/cdn-wallpaper/abstract/67239FBB-E15D-4F4F-8EE8-0F1C9F3C4E7C.jpeg", "https://cdn.jsdelivr.net/gh/xaoxuu/cdn-wallpaper/abstract/B951AE18-D431-417F-B3FE-A382403FF21B.jpeg", "https://cdn.jsdelivr.net/gh/xaoxuu/cdn-wallpaper/landscape/AEB33F9D-7294-4CF1-B8C5-3020748A9D45.jpeg", "https://cdn.jsdelivr.net/gh/xaoxuu/cdn-wallpaper/abstract/2884F904-F1F3-479E-AE27-5EBC291B63B0.jpeg", "https://cdn.jsdelivr.net/gh/xaoxuu/cdn-wallpaper/landscape/10A0FCE5-36A1-4AD0-8CF0-019259A89E03.jpeg", "https://cdn.jsdelivr.net/gh/xaoxuu/cdn-wallpaper/landscape/250662D4-5A21-4AAA-BB63-CD25CF97CFF1.jpeg", "https://cdn.jsdelivr.net/gh/xaoxuu/cdn-wallpaper/landscape/298468D7-E388-44A8-8CC5-8213BDC33CED.jpeg"];
        if ('true' == 'true') {
          function shuffle(arr){
            /*From countercurrent-time*/
            var n = arr.length;
            while(n--) {
              var index = Math.floor(Math.random() * n);
              var temp = arr[index];
              arr[index] = arr[n];
              arr[n] = temp;
            }
          }
          shuffle(imgs);
        }
        if ('.cover') {
          $('.cover').backstretch(
            imgs,
          {
            duration: "20000",
            fade: "1500"
          });
        } else {
          $.backstretch(
            imgs,
          {
            duration: "20000",
            fade: "1500"
          });
        }
      });
    </script>
  



  
    
<script src="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.js"></script>

  
    
<script src="https://cdn.jsdelivr.net/npm/meting@2.0/dist/Meting.min.js"></script>

  


<!-- 评论 （PS：只对 valine 做了 Pjax 兼容） -->

  
  
<script src="/js/valine.js"></script>


<script>
  var GUEST_INFO = ['nick', 'mail', 'link'];
  var meta = 'nick,mail,link'.split(',').filter(function (item) {
    return GUEST_INFO.indexOf(item) > -1
  });
  var REQUIRED_FIELDS = ['nick', 'mail', 'link'];
  var requiredFields = 'nick,mail'.split(',').filter(function (item) {
    return REQUIRED_FIELDS.indexOf(item) > -1
  });

  function emoji(path, idx, ext) {
    return path + "/" + path + "-" + idx + "." + ext;
  }

  var emojiMaps = {};
  for (var i = 1; i <= 54; i++) {
    emojiMaps['tieba-' + i] = emoji('tieba', i, 'png');
  }
  for (var i = 1; i <= 101; i++) {
    emojiMaps['qq-' + i] = emoji('qq', i, 'gif');
  }
  for (var i = 1; i <= 116; i++) {
    emojiMaps['aru-' + i] = emoji('aru', i, 'gif');
  }
  for (var i = 1; i <= 125; i++) {
    emojiMaps['twemoji-' + i] = emoji('twemoji', i, 'png');
  }
  for (var i = 1; i <= 4; i++) {
    emojiMaps['weibo-' + i] = emoji('weibo', i, 'png');
  }

  function pjax_valine() {
    var valinePath = $.trim($('#valine-path').text()) === "none" ?
            window.location.pathname : $.trim($('#valine-path').text());

    var valinePlaceholder = $.trim($('#valine-placeholder').text()) === "none" ?
            "快来评论吧~" : $.trim($('#valine-placeholder').text());

    var ALLPATH = '';
    if(ALLPATH != '') valinePath = ALLPATH;

    var valine = new Valine();
    valine.init({
      el: '#valine_container',
      meta: meta,
      placeholder: valinePlaceholder,
      path: valinePath,
      appId: "dogUA2FSKGTo029M1SEwGROT-MdYXbMMI",
      appKey: "u0NdtQ8nvHoMdJPSYqm1LRxE",
      pageSize: '10',
      avatar: 'robohash',
      lang: 'zh-cn',
      visitor: 'true',
      highlight: 'true',
      mathJax: 'false',
      enableQQ: 'true',
      requiredFields: requiredFields,
      emojiCDN: 'https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/emoji/valine/',
      emojiMaps: emojiMaps
    })
  }

  $(function () {
    pjax_valine();
  });
</script>




<!-- darkmodejs -->



<!-- 复制 -->

  <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
    var clipboard = new ClipboardJS('.btn-copy', {
        target: function (trigger) {
            return trigger.nextElementSibling
        }
    });
    function wait(callback, seconds) {
        var timelag = null;
        timelag = window.setTimeout(callback, seconds)
    }
    function pjax_initCopyCode() {
        var copyHtml = '';
        copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
        copyHtml += '<i class="fas fa-copy"></i><span>COPY</span>';
        copyHtml += '</button>';
        $(".highlight .code pre").before(copyHtml);
        $(".article pre code").before(copyHtml);
        clipboard.off('success').on('success', function (e) {
            let $btn = $(e.trigger);
            $btn.addClass('copied');
            let $icon = $($btn.find('i'));
            $icon.removeClass('fa-copy');
            $icon.addClass('fa-check-circle');
            let $span = $($btn.find('span'));
            $span[0].innerText = 'COPIED';
            wait(function () {
                $icon.removeClass('fa-check-circle');
                $icon.addClass('fa-copy');
                $span[0].innerText = 'COPY'
            }, 2000)
        });
        clipboard.off('error').on('error', function (e) {
            e.clearSelection();
            let $btn = $(e.trigger);
            $btn.addClass('copy-failed');
            let $icon = $($btn.find('i'));
            $icon.removeClass('fa-copy');
            $icon.addClass('fa-times-circle');
            let $span = $($btn.find('span'));
            $span[0].innerText = 'COPY FAILED';
            wait(function () {
                $icon.removeClass('fa-times-circle');
                $icon.addClass('fa-copy');
                $span[0].innerText = 'COPY'
            }, 2000)
        })
    }
    $(function () {
        pjax_initCopyCode()
    });
</script>


<!-- scrollreveal -->

  <script src="https://cdn.jsdelivr.net/npm/scrollreveal@4.0.6/dist/scrollreveal.min.js"></script>
  <script type="text/javascript">
    function pjax_scrollrebeal() {
      ScrollReveal().reveal('.l_main .reveal', {
        distance: '32px',
        duration: '800',
        interval: '20',
        scale: '1',
        easing: 'ease-out'
      });
    }

    $(function () {
      pjax_scrollrebeal();
    });
  </script>

<!-- ******************************** -->

<!-- fancybox -->
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
<script>
  function pjax_fancybox() {
    $(".article-entry").find("img").not('.inline').not('a img').each(function () { //渲染 fancybox
      var element = document.createElement("a"); // a 标签
      $(element).attr("pjax-fancybox", "");  // 过滤 pjax
      $(element).attr("href", $(this).attr("src"));
      if ($(this).attr("data-original")) {
        $(element).attr("href", $(this).attr("data-original"));
      }
      $(element).attr("data-fancybox", "images");
      var caption = "";   // 描述信息
      if ($(this).attr('alt')) {  // 判断当前页面是否存在描述信息
        $(element).attr('data-caption', $(this).attr('alt'));
        caption = $(this).attr('alt');
      }
      var div = document.createElement("div");
      $(div).addClass("fancybox");
      $(this).wrap(div); // 最外层套 div ，其实主要作用还是 class 样式
      var span = document.createElement("span");
      $(span).addClass("image-caption");
      $(span).text(caption); // 加描述
      $(this).after(span);  // 再套一层描述
      $(this).wrap(element);  // 最后套 a 标签
    })
    $(".article-entry").find("img").fancybox({
      selector: '[data-fancybox="images"]',
      hash: false,
      loop: false,
      closeClick: true,
      helpers: {
        overlay: {closeClick: true}
      },
      buttons: [
        "zoom",
        "close"
      ]
    });
  };
  $(function () {
    pjax_fancybox();
  });
</script>

<!-- ******************************** -->


  
<script src="/js/app.js"></script>




  
    
<script src="/js/search.js"></script>

  



  <script defer src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-busuanzi@2.3/js/busuanzi.pure.mini.js" data-pjax></script>



  
<script src="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.js"></script>

  <script type="text/javascript">
    $(function () {
      Waves.attach('.flat-btn', ['waves-button']);
      Waves.attach('.float-btn', ['waves-button', 'waves-float']);
      Waves.attach('.float-btn-light', ['waves-button', 'waves-float', 'waves-light']);
      Waves.attach('.flat-box', ['waves-block']);
      Waves.attach('.float-box', ['waves-block', 'waves-float']);
      Waves.attach('.waves-image');
      Waves.init();
    });
  </script>



  
<script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2/js/comment_typing.js"></script>







    
      


<script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script>

<!-- 样式位于：source/css/_third-party/pjaxanimate.styl -->

<div class="pjax-animate">
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.css">
    <script src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>
    <div id="loading-bar-wrapper"><script>NProgress.configure({parent:"#loading-bar-wrapper",trickleSpeed: 100})</script></div>
    <script>
      window.ShowLoading = function() {
        NProgress.start();
      };
      window.HideLoading = function() {
        NProgress.done();
      }
    </script>
  
</div>

<script>
    var pjax;
    document.addEventListener('DOMContentLoaded', function () {
      pjax = new Pjax({
        elements: 'a[href]:not([href^="#"]):not([href="javascript:void(0)"]):not([pjax-fancybox])',
        selectors: [
          "title",
          "#pjax-container",
          "#pjax-header-nav-list"
        ],
        cacheBust: false,   // url 地址追加时间戳，用以避免浏览器缓存
        timeout: 5000
      });
    });

    document.addEventListener('pjax:send', function (e) {
      window.stop(); // 相当于点击了浏览器的停止按钮
      var currentUrl = window.location.pathname;
      var targetUrl = e.triggerElement.href;
      var banUrl = [""];
      if (banUrl[0] != "") {
        banUrl.forEach(item => {
          if(currentUrl.indexOf(item) != -1 || targetUrl.indexOf(item) != -1) {
            window.location.href = targetUrl;
          }
        });
      }
      window.subData = null; // 移除标题（用于一二级导航栏切换处）
      $.fancybox.close();    // 关闭弹窗
      $('.nav-main').find('.list-v').not('.menu-phone').css("display","none"); // 移除小尾巴
      $('.menu-phone.list-v').css("display","none"); // 移除小尾巴
      $('.l_header .switcher .s-search').removeClass('active'); // 关闭移动端激活的搜索框
      $('.l_header').removeClass('z_search-open'); // 关闭移动端激活的搜索框
      $('.wrapper').removeClass('sub'); // 跳转页面时关闭二级导航

      $('.s-top').unbind('click');   // 解绑
      $('.menu a').unbind('click');  // 解绑
      $(window).unbind('resize');    // 解绑
      $(window).unbind('scroll');    // 解绑
      $(document).unbind('scroll');  // 解绑
      $(document).unbind('click');   // 解绑
      $('body').unbind('click');     // 解绑
      window.ShowLoading();
    });

    document.addEventListener('pjax:complete', function () {
      // 关于百度统计对 SPA 页面的处理：
      // 方案一：百度统计>管理>单页应用设置中，打开开启按钮即可对SPA进行统计。 https://tongji.baidu.com/web/help/article?id=324
      // 方案二：取消注释下列代码。 https://tongji.baidu.com/web/help/article?id=235
      // 

      // 关于谷歌统计对 SPA 页面的处理：
      // 当应用以动态方式加载内容并更新地址栏中的网址时，也应该更新通过 gtag.js 存储的网页网址。
      // https://developers.google.cn/analytics/devguides/collection/gtagjs/single-page-applications?hl=zh-cn
      

      $('.nav-main').find('.list-v').not('.menu-phone').removeAttr("style",""); // 移除小尾巴的移除
      $('.menu-phone.list-v').removeAttr("style",""); // 移除小尾巴的移除
      $('script[data-pjax], .pjax-reload script').each(function () {
        $(this).parent().append($(this).remove());
      });

      try{
        pjax_fancybox();
        
          
          if ('.cover') {
            $('.cover').backstretch("resize");
          } else {
            $.backstretch("resize");
          }
        
        
        
          pjax_scrollrebeal();
        
        
          pjax_initCopyCode();
        
        
          pjax_valine();
        
        
        
      } catch (e) {
        console.log(e);
      }
      window.HideLoading();
    });

    document.addEventListener('pjax:error', function (e) {
      window.HideLoading();
      window.location.href = e.triggerElement.href;
    });
</script>

    
  </div>
</body>
</html>
